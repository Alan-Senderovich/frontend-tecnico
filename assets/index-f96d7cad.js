(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))r(s);new MutationObserver(s=>{for(const i of s)if(i.type==="childList")for(const o of i.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&r(o)}).observe(document,{childList:!0,subtree:!0});function t(s){const i={};return s.integrity&&(i.integrity=s.integrity),s.referrerPolicy&&(i.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?i.credentials="include":s.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function r(s){if(s.ep)return;s.ep=!0;const i=t(s);fetch(s.href,i)}})();function N(){}function jt(n,e){for(const t in e)n[t]=e[t];return n}function pt(n){return n()}function Ze(){return Object.create(null)}function ne(n){n.forEach(pt)}function mt(n){return typeof n=="function"}function se(n,e){return n!=n?e==e:n!==e||n&&typeof n=="object"||typeof n=="function"}function Ct(n){return Object.keys(n).length===0}function d(n,e){n.appendChild(e)}function I(n,e,t){n.insertBefore(e,t||null)}function C(n){n.parentNode&&n.parentNode.removeChild(n)}function p(n){return document.createElement(n)}function xt(n){return document.createElementNS("http://www.w3.org/2000/svg",n)}function D(n){return document.createTextNode(n)}function O(){return D(" ")}function At(){return D("")}function Re(n,e,t,r){return n.addEventListener(e,t,r),()=>n.removeEventListener(e,t,r)}function m(n,e,t){t==null?n.removeAttribute(e):n.getAttribute(e)!==t&&n.setAttribute(e,t)}function et(n,e){for(const t in e)m(n,t,e[t])}function It(n){return Array.from(n.childNodes)}function fe(n,e){e=""+e,n.data!==e&&(n.data=e)}function tt(n,e){n.value=e??""}let be;function ge(n){be=n}function Pt(){if(!be)throw new Error("Function called outside component initialization");return be}function rt(n){Pt().$$.on_mount.push(n)}const he=[],nt=[];let pe=[];const st=[],Ut=Promise.resolve();let Fe=!1;function Nt(){Fe||(Fe=!0,Ut.then(_t))}function Ge(n){pe.push(n)}const Ne=new Set;let le=0;function _t(){if(le!==0)return;const n=be;do{try{for(;le<he.length;){const e=he[le];le++,ge(e),Dt(e.$$)}}catch(e){throw he.length=0,le=0,e}for(ge(null),he.length=0,le=0;nt.length;)nt.pop()();for(let e=0;e<pe.length;e+=1){const t=pe[e];Ne.has(t)||(Ne.add(t),t())}pe.length=0}while(he.length);for(;st.length;)st.pop()();Fe=!1,Ne.clear(),ge(n)}function Dt(n){if(n.fragment!==null){n.update(),ne(n.before_update);const e=n.dirty;n.dirty=[-1],n.fragment&&n.fragment.p(n.ctx,e),n.after_update.forEach(Ge)}}function Lt(n){const e=[],t=[];pe.forEach(r=>n.indexOf(r)===-1?e.push(r):t.push(r)),t.forEach(r=>r()),pe=e}const Se=new Set;let re;function vt(){re={r:0,c:[],p:re}}function gt(){re.r||ne(re.c),re=re.p}function A(n,e){n&&n.i&&(Se.delete(n),n.i(e))}function L(n,e,t,r){if(n&&n.o){if(Se.has(n))return;Se.add(n),re.c.push(()=>{Se.delete(n),r&&(t&&n.d(1),r())}),n.o(e)}else r&&r()}function Mt(n,e){L(n,1,1,()=>{e.delete(n.key)})}function Bt(n,e,t,r,s,i,o,c,u,l,a,h){let f=n.length,v=i.length,_=f;const g={};for(;_--;)g[n[_].key]=_;const E=[],$=new Map,P=new Map,Y=[];for(_=v;_--;){const w=h(s,i,_),S=t(w);let U=o.get(S);U?r&&Y.push(()=>U.p(w,e)):(U=l(S,w),U.c()),$.set(S,E[_]=U),S in g&&P.set(S,Math.abs(_-g[S]))}const V=new Set,ae=new Set;function ce(w){A(w,1),w.m(c,a),o.set(w.key,w),a=w.first,v--}for(;f&&v;){const w=E[v-1],S=n[f-1],U=w.key,J=S.key;w===S?(a=w.first,f--,v--):$.has(J)?!o.has(U)||V.has(U)?ce(w):ae.has(J)?f--:P.get(U)>P.get(J)?(ae.add(U),ce(w)):(V.add(J),f--):(u(S,o),f--)}for(;f--;){const w=n[f];$.has(w.key)||u(w,o)}for(;v;)ce(E[v-1]);return ne(Y),E}function Ft(n,e){const t={},r={},s={$$scope:1};let i=n.length;for(;i--;){const o=n[i],c=e[i];if(c){for(const u in o)u in c||(r[u]=1);for(const u in c)s[u]||(t[u]=c[u],s[u]=1);n[i]=c}else for(const u in o)s[u]=1}for(const o in r)o in t||(t[o]=void 0);return t}function K(n){n&&n.c()}function H(n,e,t,r){const{fragment:s,after_update:i}=n.$$;s&&s.m(e,t),r||Ge(()=>{const o=n.$$.on_mount.map(pt).filter(mt);n.$$.on_destroy?n.$$.on_destroy.push(...o):ne(o),n.$$.on_mount=[]}),i.forEach(Ge)}function z(n,e){const t=n.$$;t.fragment!==null&&(Lt(t.after_update),ne(t.on_destroy),t.fragment&&t.fragment.d(e),t.on_destroy=t.fragment=null,t.ctx=[])}function Gt(n,e){n.$$.dirty[0]===-1&&(he.push(n),Nt(),n.$$.dirty.fill(0)),n.$$.dirty[e/31|0]|=1<<e%31}function ie(n,e,t,r,s,i,o,c=[-1]){const u=be;ge(n);const l=n.$$={fragment:null,ctx:[],props:i,update:N,not_equal:s,bound:Ze(),on_mount:[],on_destroy:[],on_disconnect:[],before_update:[],after_update:[],context:new Map(e.context||(u?u.$$.context:[])),callbacks:Ze(),dirty:c,skip_bound:!1,root:e.target||u.$$.root};o&&o(l.root);let a=!1;if(l.ctx=t?t(n,e.props||{},(h,f,...v)=>{const _=v.length?v[0]:f;return l.ctx&&s(l.ctx[h],l.ctx[h]=_)&&(!l.skip_bound&&l.bound[h]&&l.bound[h](_),a&&Gt(n,h)),f}):[],l.update(),a=!0,ne(l.before_update),l.fragment=r?r(l.ctx):!1,e.target){if(e.hydrate){const h=It(e.target);l.fragment&&l.fragment.l(h),h.forEach(C)}else l.fragment&&l.fragment.c();e.intro&&A(n.$$.fragment),H(n,e.target,e.anchor,e.customElement),_t()}ge(u)}class oe{$destroy(){z(this,1),this.$destroy=N}$on(e,t){if(!mt(t))return N;const r=this.$$.callbacks[e]||(this.$$.callbacks[e]=[]);return r.push(t),()=>{const s=r.indexOf(t);s!==-1&&r.splice(s,1)}}$set(e){this.$$set&&!Ct(e)&&(this.$$.skip_bound=!0,this.$$set(e),this.$$.skip_bound=!1)}}const Ht="1.35.7",yt={"X-Client-Info":`supabase-js/${Ht}`},zt="supabase.auth.token";function Jt(n){return n.replace(/\/$/,"")}const qt=()=>typeof window<"u",Wt="1.24.0",Kt="http://localhost:9999",Yt={"X-Client-Info":`gotrue-js/${Wt}`},Ee=10,Q={ERROR_MESSAGE:"Request Failed",MAX_RETRIES:10,RETRY_INTERVAL:2},ve="supabase.auth.token",Vt={name:"sb",lifetime:60*60*8,domain:"",path:"/",sameSite:"lax"};var ke=globalThis&&globalThis.__awaiter||function(n,e,t,r){function s(i){return i instanceof t?i:new t(function(o){o(i)})}return new(t||(t=Promise))(function(i,o){function c(a){try{l(r.next(a))}catch(h){o(h)}}function u(a){try{l(r.throw(a))}catch(h){o(h)}}function l(a){a.done?i(a.value):s(a.value).then(c,u)}l((r=r.apply(n,e||[])).next())})};const Xt=n=>n.msg||n.message||n.error_description||n.error||JSON.stringify(n),Qt=(n,e)=>{if(!(n!=null&&n.status))return e({message:Q.ERROR_MESSAGE});if(typeof n.json!="function")return e(n);n.json().then(t=>e({message:Xt(t),status:(n==null?void 0:n.status)||500}))},Zt=(n,e,t)=>{const r={method:n,headers:(e==null?void 0:e.headers)||{}};return n==="GET"||(r.headers=Object.assign({"Content-Type":"application/json;charset=UTF-8"},e==null?void 0:e.headers),r.body=JSON.stringify(t)),r};function je(n,e,t,r,s){return ke(this,void 0,void 0,function*(){return new Promise((i,o)=>{n(t,Zt(e,r,s)).then(c=>{if(!c.ok)throw c;return r!=null&&r.noResolveJson?i:c.json()}).then(c=>i(c)).catch(c=>Qt(c,o))})})}function De(n,e,t){return ke(this,void 0,void 0,function*(){return je(n,"GET",e,t)})}function R(n,e,t,r){return ke(this,void 0,void 0,function*(){return je(n,"POST",e,r,t)})}function it(n,e,t,r){return ke(this,void 0,void 0,function*(){return je(n,"PUT",e,r,t)})}function er(n,e,t,r){return ke(this,void 0,void 0,function*(){return je(n,"DELETE",e,r,t)})}function tr(n,e,t){const r=t||{},s=encodeURIComponent,i=/^[\u0009\u0020-\u007e\u0080-\u00ff]+$/;if(typeof s!="function")throw new TypeError("option encode is invalid");if(!i.test(n))throw new TypeError("argument name is invalid");const o=s(e);if(o&&!i.test(o))throw new TypeError("argument val is invalid");let c=n+"="+o;if(r.maxAge!=null){const u=r.maxAge-0;if(isNaN(u)||!isFinite(u))throw new TypeError("option maxAge is invalid");c+="; Max-Age="+Math.floor(u)}if(r.domain){if(!i.test(r.domain))throw new TypeError("option domain is invalid");c+="; Domain="+r.domain}if(r.path){if(!i.test(r.path))throw new TypeError("option path is invalid");c+="; Path="+r.path}if(r.expires){if(typeof r.expires.toUTCString!="function")throw new TypeError("option expires is invalid");c+="; Expires="+r.expires.toUTCString()}if(r.httpOnly&&(c+="; HttpOnly"),r.secure&&(c+="; Secure"),r.sameSite)switch(typeof r.sameSite=="string"?r.sameSite.toLowerCase():r.sameSite){case"lax":c+="; SameSite=Lax";break;case"strict":c+="; SameSite=Strict";break;case"none":c+="; SameSite=None";break;default:throw new TypeError("option sameSite is invalid")}return c}function rr(n){if(!n||!n.headers||!n.headers.host)throw new Error('The "host" request header is not available');const e=n.headers.host.indexOf(":")>-1&&n.headers.host.split(":")[0]||n.headers.host;return!(["localhost","127.0.0.1"].indexOf(e)>-1||e.endsWith(".local"))}function nr(n,e){var t,r,s;return tr(n.name,n.value,{maxAge:n.maxAge,expires:new Date(Date.now()+n.maxAge*1e3),httpOnly:!0,secure:e,path:(t=n.path)!==null&&t!==void 0?t:"/",domain:(r=n.domain)!==null&&r!==void 0?r:"",sameSite:(s=n.sameSite)!==null&&s!==void 0?s:"lax"})}function He(n,e,t){const r=t.map(i=>nr(i,rr(n))),s=e.getHeader("Set-Cookie");return s&&(s instanceof Array?Array.prototype.push.apply(r,s):typeof s=="string"&&r.push(s)),r}function $e(n,e,t){e.setHeader("Set-Cookie",He(n,e,t))}const sr="modulepreload",ir=function(n){return"/"+n},ot={},Ce=function(e,t,r){if(!t||t.length===0)return e();const s=document.getElementsByTagName("link");return Promise.all(t.map(i=>{if(i=ir(i),i in ot)return;ot[i]=!0;const o=i.endsWith(".css"),c=o?'[rel="stylesheet"]':"";if(!!r)for(let a=s.length-1;a>=0;a--){const h=s[a];if(h.href===i&&(!o||h.rel==="stylesheet"))return}else if(document.querySelector(`link[href="${i}"]${c}`))return;const l=document.createElement("link");if(l.rel=o?"stylesheet":sr,o||(l.as="script",l.crossOrigin=""),l.href=i,document.head.appendChild(l),o)return new Promise((a,h)=>{l.addEventListener("load",a),l.addEventListener("error",()=>h(new Error(`Unable to preload CSS for ${i}`)))})})).then(()=>e())};var xe=globalThis&&globalThis.__awaiter||function(n,e,t,r){function s(i){return i instanceof t?i:new t(function(o){o(i)})}return new(t||(t=Promise))(function(i,o){function c(a){try{l(r.next(a))}catch(h){o(h)}}function u(a){try{l(r.throw(a))}catch(h){o(h)}}function l(a){a.done?i(a.value):s(a.value).then(c,u)}l((r=r.apply(n,e||[])).next())})};function W(n){return Math.round(Date.now()/1e3)+n}function or(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(n){const e=Math.random()*16|0;return(n=="x"?e:e&3|8).toString(16)})}const G=()=>typeof window<"u";function F(n,e){var t;e||(e=((t=window==null?void 0:window.location)===null||t===void 0?void 0:t.href)||""),n=n.replace(/[\[\]]/g,"\\$&");const r=new RegExp("[?&#]"+n+"(=([^&#]*)|&|#|$)"),s=r.exec(e);return s?s[2]?decodeURIComponent(s[2].replace(/\+/g," ")):"":null}const ar=n=>{let e;return n?e=n:typeof fetch>"u"?e=(...t)=>xe(void 0,void 0,void 0,function*(){return yield(yield Ce(()=>import("./browser-ponyfill-9071d88c.js").then(r=>r.b),[])).fetch(...t)}):e=fetch,(...t)=>e(...t)},cr=(n,e,t)=>xe(void 0,void 0,void 0,function*(){G()&&(yield n==null?void 0:n.setItem(e,JSON.stringify(t)))}),lr=(n,e)=>xe(void 0,void 0,void 0,function*(){const t=G()&&(yield n==null?void 0:n.getItem(e));if(!t)return null;try{return JSON.parse(t)}catch{return t}}),ur=(n,e)=>{const t=G()&&(n==null?void 0:n.getItem(e));if(!t||typeof t!="string")return null;try{return JSON.parse(t)}catch{return t}},hr=(n,e)=>xe(void 0,void 0,void 0,function*(){G()&&(yield n==null?void 0:n.removeItem(e))});var T=globalThis&&globalThis.__awaiter||function(n,e,t,r){function s(i){return i instanceof t?i:new t(function(o){o(i)})}return new(t||(t=Promise))(function(i,o){function c(a){try{l(r.next(a))}catch(h){o(h)}}function u(a){try{l(r.throw(a))}catch(h){o(h)}}function l(a){a.done?i(a.value):s(a.value).then(c,u)}l((r=r.apply(n,e||[])).next())})};class dr{constructor({url:e="",headers:t={},cookieOptions:r,fetch:s}){this.url=e,this.headers=t,this.cookieOptions=Object.assign(Object.assign({},Vt),r),this.fetch=ar(s)}_createRequestHeaders(e){const t=Object.assign({},this.headers);return t.Authorization=`Bearer ${e}`,t}cookieName(){var e;return(e=this.cookieOptions.name)!==null&&e!==void 0?e:""}getUrlForProvider(e,t){const r=[`provider=${encodeURIComponent(e)}`];if(t!=null&&t.redirectTo&&r.push(`redirect_to=${encodeURIComponent(t.redirectTo)}`),t!=null&&t.scopes&&r.push(`scopes=${encodeURIComponent(t.scopes)}`),t!=null&&t.queryParams){const s=new URLSearchParams(t.queryParams);r.push(`${s}`)}return`${this.url}/authorize?${r.join("&")}`}signUpWithEmail(e,t,r={}){return T(this,void 0,void 0,function*(){try{const s=Object.assign({},this.headers);let i="";r.redirectTo&&(i="?redirect_to="+encodeURIComponent(r.redirectTo));const o=yield R(this.fetch,`${this.url}/signup${i}`,{email:e,password:t,data:r.data,gotrue_meta_security:{captcha_token:r.captchaToken}},{headers:s}),c=Object.assign({},o);return c.expires_in&&(c.expires_at=W(o.expires_in)),{data:c,error:null}}catch(s){return{data:null,error:s}}})}signInWithEmail(e,t,r={}){return T(this,void 0,void 0,function*(){try{const s=Object.assign({},this.headers);let i="?grant_type=password";r.redirectTo&&(i+="&redirect_to="+encodeURIComponent(r.redirectTo));const o=yield R(this.fetch,`${this.url}/token${i}`,{email:e,password:t,gotrue_meta_security:{captcha_token:r.captchaToken}},{headers:s}),c=Object.assign({},o);return c.expires_in&&(c.expires_at=W(o.expires_in)),{data:c,error:null}}catch(s){return{data:null,error:s}}})}signUpWithPhone(e,t,r={}){return T(this,void 0,void 0,function*(){try{const s=Object.assign({},this.headers),i=yield R(this.fetch,`${this.url}/signup`,{phone:e,password:t,data:r.data,gotrue_meta_security:{captcha_token:r.captchaToken}},{headers:s}),o=Object.assign({},i);return o.expires_in&&(o.expires_at=W(i.expires_in)),{data:o,error:null}}catch(s){return{data:null,error:s}}})}signInWithPhone(e,t,r={}){return T(this,void 0,void 0,function*(){try{const s=Object.assign({},this.headers),i="?grant_type=password",o=yield R(this.fetch,`${this.url}/token${i}`,{phone:e,password:t,gotrue_meta_security:{captcha_token:r.captchaToken}},{headers:s}),c=Object.assign({},o);return c.expires_in&&(c.expires_at=W(o.expires_in)),{data:c,error:null}}catch(s){return{data:null,error:s}}})}signInWithOpenIDConnect({id_token:e,nonce:t,client_id:r,issuer:s,provider:i}){return T(this,void 0,void 0,function*(){try{const o=Object.assign({},this.headers),c="?grant_type=id_token",u=yield R(this.fetch,`${this.url}/token${c}`,{id_token:e,nonce:t,client_id:r,issuer:s,provider:i},{headers:o}),l=Object.assign({},u);return l.expires_in&&(l.expires_at=W(u.expires_in)),{data:l,error:null}}catch(o){return{data:null,error:o}}})}sendMagicLinkEmail(e,t={}){var r;return T(this,void 0,void 0,function*(){try{const s=Object.assign({},this.headers);let i="";t.redirectTo&&(i+="?redirect_to="+encodeURIComponent(t.redirectTo));const o=(r=t.shouldCreateUser)!==null&&r!==void 0?r:!0;return{data:yield R(this.fetch,`${this.url}/otp${i}`,{email:e,create_user:o,gotrue_meta_security:{captcha_token:t.captchaToken}},{headers:s}),error:null}}catch(s){return{data:null,error:s}}})}sendMobileOTP(e,t={}){var r;return T(this,void 0,void 0,function*(){try{const s=(r=t.shouldCreateUser)!==null&&r!==void 0?r:!0,i=Object.assign({},this.headers);return{data:yield R(this.fetch,`${this.url}/otp`,{phone:e,create_user:s,gotrue_meta_security:{captcha_token:t.captchaToken}},{headers:i}),error:null}}catch(s){return{data:null,error:s}}})}signOut(e){return T(this,void 0,void 0,function*(){try{return yield R(this.fetch,`${this.url}/logout`,{},{headers:this._createRequestHeaders(e),noResolveJson:!0}),{error:null}}catch(t){return{error:t}}})}verifyMobileOTP(e,t,r={}){return T(this,void 0,void 0,function*(){try{const s=Object.assign({},this.headers),i=yield R(this.fetch,`${this.url}/verify`,{phone:e,token:t,type:"sms",redirect_to:r.redirectTo},{headers:s}),o=Object.assign({},i);return o.expires_in&&(o.expires_at=W(i.expires_in)),{data:o,error:null}}catch(s){return{data:null,error:s}}})}verifyOTP({email:e,phone:t,token:r,type:s="sms"},i={}){return T(this,void 0,void 0,function*(){try{const o=Object.assign({},this.headers),c=yield R(this.fetch,`${this.url}/verify`,{email:e,phone:t,token:r,type:s,redirect_to:i.redirectTo},{headers:o}),u=Object.assign({},c);return u.expires_in&&(u.expires_at=W(c.expires_in)),{data:u,error:null}}catch(o){return{data:null,error:o}}})}inviteUserByEmail(e,t={}){return T(this,void 0,void 0,function*(){try{const r=Object.assign({},this.headers);let s="";return t.redirectTo&&(s+="?redirect_to="+encodeURIComponent(t.redirectTo)),{data:yield R(this.fetch,`${this.url}/invite${s}`,{email:e,data:t.data},{headers:r}),error:null}}catch(r){return{data:null,error:r}}})}resetPasswordForEmail(e,t={}){return T(this,void 0,void 0,function*(){try{const r=Object.assign({},this.headers);let s="";return t.redirectTo&&(s+="?redirect_to="+encodeURIComponent(t.redirectTo)),{data:yield R(this.fetch,`${this.url}/recover${s}`,{email:e,gotrue_meta_security:{captcha_token:t.captchaToken}},{headers:r}),error:null}}catch(r){return{data:null,error:r}}})}refreshAccessToken(e){return T(this,void 0,void 0,function*(){try{const t=yield R(this.fetch,`${this.url}/token?grant_type=refresh_token`,{refresh_token:e},{headers:this.headers}),r=Object.assign({},t);return r.expires_in&&(r.expires_at=W(t.expires_in)),{data:r,error:null}}catch(t){return{data:null,error:t}}})}setAuthCookie(e,t){e.method!=="POST"&&(t.setHeader("Allow","POST"),t.status(405).end("Method Not Allowed"));const{event:r,session:s}=e.body;if(!r)throw new Error("Auth event missing!");if(r==="SIGNED_IN"){if(!s)throw new Error("Auth session missing!");$e(e,t,[{key:"access-token",value:s.access_token},{key:"refresh-token",value:s.refresh_token}].map(i=>{var o;return{name:`${this.cookieName()}-${i.key}`,value:i.value,domain:this.cookieOptions.domain,maxAge:(o=this.cookieOptions.lifetime)!==null&&o!==void 0?o:0,path:this.cookieOptions.path,sameSite:this.cookieOptions.sameSite}}))}r==="SIGNED_OUT"&&$e(e,t,["access-token","refresh-token"].map(i=>({name:`${this.cookieName()}-${i}`,value:"",maxAge:-1}))),t.status(200).json({})}deleteAuthCookie(e,t,{redirectTo:r="/"}){return $e(e,t,["access-token","refresh-token"].map(s=>({name:`${this.cookieName()}-${s}`,value:"",maxAge:-1}))),t.redirect(307,r)}getAuthCookieString(e,t){e.method!=="POST"&&(t.setHeader("Allow","POST"),t.status(405).end("Method Not Allowed"));const{event:r,session:s}=e.body;if(!r)throw new Error("Auth event missing!");if(r==="SIGNED_IN"){if(!s)throw new Error("Auth session missing!");return He(e,t,[{key:"access-token",value:s.access_token},{key:"refresh-token",value:s.refresh_token}].map(i=>{var o;return{name:`${this.cookieName()}-${i.key}`,value:i.value,domain:this.cookieOptions.domain,maxAge:(o=this.cookieOptions.lifetime)!==null&&o!==void 0?o:0,path:this.cookieOptions.path,sameSite:this.cookieOptions.sameSite}}))}return r==="SIGNED_OUT"?He(e,t,["access-token","refresh-token"].map(i=>({name:`${this.cookieName()}-${i}`,value:"",maxAge:-1}))):t.getHeader("Set-Cookie")}generateLink(e,t,r={}){return T(this,void 0,void 0,function*(){try{return{data:yield R(this.fetch,`${this.url}/admin/generate_link`,{type:e,email:t,password:r.password,data:r.data,redirect_to:r.redirectTo},{headers:this.headers}),error:null}}catch(s){return{data:null,error:s}}})}createUser(e){return T(this,void 0,void 0,function*(){try{const t=yield R(this.fetch,`${this.url}/admin/users`,e,{headers:this.headers});return{user:t,data:t,error:null}}catch(t){return{user:null,data:null,error:t}}})}listUsers(){return T(this,void 0,void 0,function*(){try{return{data:(yield De(this.fetch,`${this.url}/admin/users`,{headers:this.headers})).users,error:null}}catch(e){return{data:null,error:e}}})}getUserById(e){return T(this,void 0,void 0,function*(){try{return{data:yield De(this.fetch,`${this.url}/admin/users/${e}`,{headers:this.headers}),error:null}}catch(t){return{data:null,error:t}}})}getUserByCookie(e,t){return T(this,void 0,void 0,function*(){try{if(!e.cookies)throw new Error("Not able to parse cookies! When using Express make sure the cookie-parser middleware is in use!");const r=e.cookies[`${this.cookieName()}-access-token`],s=e.cookies[`${this.cookieName()}-refresh-token`];if(!r)throw new Error("No cookie found!");const{user:i,error:o}=yield this.getUser(r);if(o){if(!s)throw new Error("No refresh_token cookie found!");if(!t)throw new Error("You need to pass the res object to automatically refresh the session!");const{data:c,error:u}=yield this.refreshAccessToken(s);if(u)throw u;if(c)return $e(e,t,[{key:"access-token",value:c.access_token},{key:"refresh-token",value:c.refresh_token}].map(l=>{var a;return{name:`${this.cookieName()}-${l.key}`,value:l.value,domain:this.cookieOptions.domain,maxAge:(a=this.cookieOptions.lifetime)!==null&&a!==void 0?a:0,path:this.cookieOptions.path,sameSite:this.cookieOptions.sameSite}})),{token:c.access_token,user:c.user,data:c.user,error:null}}return{token:r,user:i,data:i,error:null}}catch(r){return{token:null,user:null,data:null,error:r}}})}updateUserById(e,t){return T(this,void 0,void 0,function*(){try{const r=yield it(this.fetch,`${this.url}/admin/users/${e}`,t,{headers:this.headers});return{user:r,data:r,error:null}}catch(r){return{user:null,data:null,error:r}}})}deleteUser(e){return T(this,void 0,void 0,function*(){try{const t=yield er(this.fetch,`${this.url}/admin/users/${e}`,{},{headers:this.headers});return{user:t,data:t,error:null}}catch(t){return{user:null,data:null,error:t}}})}getUser(e){return T(this,void 0,void 0,function*(){try{const t=yield De(this.fetch,`${this.url}/user`,{headers:this._createRequestHeaders(e)});return{user:t,data:t,error:null}}catch(t){return{user:null,data:null,error:t}}})}updateUser(e,t){return T(this,void 0,void 0,function*(){try{const r=yield it(this.fetch,`${this.url}/user`,t,{headers:this._createRequestHeaders(e)});return{user:r,data:r,error:null}}catch(r){return{user:null,data:null,error:r}}})}}function fr(){if(typeof globalThis!="object")try{Object.defineProperty(Object.prototype,"__magic__",{get:function(){return this},configurable:!0}),__magic__.globalThis=__magic__,delete Object.prototype.__magic__}catch{typeof self<"u"&&(self.globalThis=self)}}var j=globalThis&&globalThis.__awaiter||function(n,e,t,r){function s(i){return i instanceof t?i:new t(function(o){o(i)})}return new(t||(t=Promise))(function(i,o){function c(a){try{l(r.next(a))}catch(h){o(h)}}function u(a){try{l(r.throw(a))}catch(h){o(h)}}function l(a){a.done?i(a.value):s(a.value).then(c,u)}l((r=r.apply(n,e||[])).next())})};fr();const pr={url:Kt,autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,multiTab:!0,headers:Yt},mr=n=>{try{return atob(n.replace(/[-]/g,"+").replace(/[_]/g,"/"))}catch(e){if(e instanceof ReferenceError)return Buffer.from(n,"base64").toString("utf-8");throw e}};class _r{constructor(e){this.stateChangeEmitters=new Map,this.networkRetries=0;const t=Object.assign(Object.assign({},pr),e);this.currentUser=null,this.currentSession=null,this.autoRefreshToken=t.autoRefreshToken,this.persistSession=t.persistSession,this.multiTab=t.multiTab,this.localStorage=t.localStorage||globalThis.localStorage,this.api=new dr({url:t.url,headers:t.headers,cookieOptions:t.cookieOptions,fetch:t.fetch}),this._recoverSession(),this._recoverAndRefresh(),this._listenForMultiTabEvents(),this._handleVisibilityChange(),t.detectSessionInUrl&&G()&&F("access_token")&&this.getSessionFromUrl({storeSession:!0}).then(({error:r})=>{if(r)throw new Error("Error getting session from URL.")})}signUp({email:e,password:t,phone:r},s={}){return j(this,void 0,void 0,function*(){try{this._removeSession();const{data:i,error:o}=r&&t?yield this.api.signUpWithPhone(r,t,{data:s.data,captchaToken:s.captchaToken}):yield this.api.signUpWithEmail(e,t,{redirectTo:s.redirectTo,data:s.data,captchaToken:s.captchaToken});if(o)throw o;if(!i)throw"An error occurred on sign up.";let c=null,u=null;return i.access_token&&(c=i,u=c.user,this._saveSession(c),this._notifyAllSubscribers("SIGNED_IN")),i.id&&(u=i),{user:u,session:c,error:null}}catch(i){return{user:null,session:null,error:i}}})}signIn({email:e,phone:t,password:r,refreshToken:s,provider:i,oidc:o},c={}){return j(this,void 0,void 0,function*(){try{if(this._removeSession(),e&&!r){const{error:u}=yield this.api.sendMagicLinkEmail(e,{redirectTo:c.redirectTo,shouldCreateUser:c.shouldCreateUser,captchaToken:c.captchaToken});return{user:null,session:null,error:u}}if(e&&r)return this._handleEmailSignIn(e,r,{redirectTo:c.redirectTo,captchaToken:c.captchaToken});if(t&&!r){const{error:u}=yield this.api.sendMobileOTP(t,{shouldCreateUser:c.shouldCreateUser,captchaToken:c.captchaToken});return{user:null,session:null,error:u}}if(t&&r)return this._handlePhoneSignIn(t,r);if(s){const{error:u}=yield this._callRefreshToken(s);if(u)throw u;return{user:this.currentUser,session:this.currentSession,error:null}}if(i)return this._handleProviderSignIn(i,{redirectTo:c.redirectTo,scopes:c.scopes,queryParams:c.queryParams});if(o)return this._handleOpenIDConnectSignIn(o);throw new Error("You must provide either an email, phone number, a third-party provider or OpenID Connect.")}catch(u){return{user:null,session:null,error:u}}})}verifyOTP(e,t={}){return j(this,void 0,void 0,function*(){try{this._removeSession();const{data:r,error:s}=yield this.api.verifyOTP(e,t);if(s)throw s;if(!r)throw"An error occurred on token verification.";let i=null,o=null;return r.access_token&&(i=r,o=i.user,this._saveSession(i),this._notifyAllSubscribers("SIGNED_IN")),r.id&&(o=r),{user:o,session:i,error:null}}catch(r){return{user:null,session:null,error:r}}})}user(){return this.currentUser}session(){return this.currentSession}refreshSession(){var e;return j(this,void 0,void 0,function*(){try{if(!(!((e=this.currentSession)===null||e===void 0)&&e.access_token))throw new Error("Not logged in.");const{error:t}=yield this._callRefreshToken();if(t)throw t;return{data:this.currentSession,user:this.currentUser,error:null}}catch(t){return{data:null,user:null,error:t}}})}update(e){var t;return j(this,void 0,void 0,function*(){try{if(!(!((t=this.currentSession)===null||t===void 0)&&t.access_token))throw new Error("Not logged in.");const{user:r,error:s}=yield this.api.updateUser(this.currentSession.access_token,e);if(s)throw s;if(!r)throw Error("Invalid user data.");const i=Object.assign(Object.assign({},this.currentSession),{user:r});return this._saveSession(i),this._notifyAllSubscribers("USER_UPDATED"),{data:r,user:r,error:null}}catch(r){return{data:null,user:null,error:r}}})}setSession(e){return j(this,void 0,void 0,function*(){let t;if(typeof e=="string"){const r=e,{data:s,error:i}=yield this.api.refreshAccessToken(r);if(i)return{session:null,error:i};t=s}else{const r=Math.round(Date.now()/1e3);let{refresh_token:s,access_token:i}=e,o=0,c=0;const u=i.split(".");if(u.length!==3)throw new Error("access_token is not a proper JWT");const l=mr(u[1]);let a;try{a=JSON.parse(l)}catch{throw new Error("access_token is not a proper JWT, invalid JSON in body")}if(typeof a=="object"&&a&&typeof a.exp=="number")o=a.exp,c=r-a.exp;else throw new Error("access_token is not a proper JWT, missing exp claim");if(r>o){const{data:h,error:f}=yield this.api.refreshAccessToken(s);if(f)return{session:null,error:f};t=h}else{const{user:h,error:f}=yield this.api.getUser(i);if(f)throw f;t={access_token:i,expires_in:c,expires_at:o,refresh_token:s,token_type:"bearer",user:h}}}try{return this._saveSession(t),this._notifyAllSubscribers("SIGNED_IN"),{session:t,error:null}}catch(r){return{error:r,session:null}}})}setAuth(e){return this.currentSession=Object.assign(Object.assign({},this.currentSession),{access_token:e,token_type:"bearer",user:this.user()}),this._notifyAllSubscribers("TOKEN_REFRESHED"),this.currentSession}getSessionFromUrl(e){return j(this,void 0,void 0,function*(){try{if(!G())throw new Error("No browser detected.");const t=F("error_description");if(t)throw new Error(t);const r=F("provider_token"),s=F("provider_refresh_token"),i=F("access_token");if(!i)throw new Error("No access_token detected.");const o=F("expires_in");if(!o)throw new Error("No expires_in detected.");const c=F("refresh_token");if(!c)throw new Error("No refresh_token detected.");const u=F("token_type");if(!u)throw new Error("No token_type detected.");const a=Math.round(Date.now()/1e3)+parseInt(o),{user:h,error:f}=yield this.api.getUser(i);if(f)throw f;const v={provider_token:r,provider_refresh_token:s,access_token:i,expires_in:parseInt(o),expires_at:a,refresh_token:c,token_type:u,user:h};if(e!=null&&e.storeSession){this._saveSession(v);const _=F("type");this._notifyAllSubscribers("SIGNED_IN"),_==="recovery"&&this._notifyAllSubscribers("PASSWORD_RECOVERY")}return window.location.hash="",{data:v,error:null}}catch(t){return{data:null,error:t}}})}signOut(){var e;return j(this,void 0,void 0,function*(){const t=(e=this.currentSession)===null||e===void 0?void 0:e.access_token;if(this._removeSession(),this._notifyAllSubscribers("SIGNED_OUT"),t){const{error:r}=yield this.api.signOut(t);if(r)return{error:r}}return{error:null}})}onAuthStateChange(e){try{const t=or(),r={id:t,callback:e,unsubscribe:()=>{this.stateChangeEmitters.delete(t)}};return this.stateChangeEmitters.set(t,r),{data:r,error:null}}catch(t){return{data:null,error:t}}}_handleEmailSignIn(e,t,r={}){var s,i;return j(this,void 0,void 0,function*(){try{const{data:o,error:c}=yield this.api.signInWithEmail(e,t,{redirectTo:r.redirectTo,captchaToken:r.captchaToken});return c||!o?{data:null,user:null,session:null,error:c}:((!((s=o==null?void 0:o.user)===null||s===void 0)&&s.confirmed_at||!((i=o==null?void 0:o.user)===null||i===void 0)&&i.email_confirmed_at)&&(this._saveSession(o),this._notifyAllSubscribers("SIGNED_IN")),{data:o,user:o.user,session:o,error:null})}catch(o){return{data:null,user:null,session:null,error:o}}})}_handlePhoneSignIn(e,t,r={}){var s;return j(this,void 0,void 0,function*(){try{const{data:i,error:o}=yield this.api.signInWithPhone(e,t,r);return o||!i?{data:null,user:null,session:null,error:o}:(!((s=i==null?void 0:i.user)===null||s===void 0)&&s.phone_confirmed_at&&(this._saveSession(i),this._notifyAllSubscribers("SIGNED_IN")),{data:i,user:i.user,session:i,error:null})}catch(i){return{data:null,user:null,session:null,error:i}}})}_handleProviderSignIn(e,t={}){const r=this.api.getUrlForProvider(e,{redirectTo:t.redirectTo,scopes:t.scopes,queryParams:t.queryParams});try{return G()&&(window.location.href=r),{provider:e,url:r,data:null,session:null,user:null,error:null}}catch(s){return r?{provider:e,url:r,data:null,session:null,user:null,error:null}:{data:null,user:null,session:null,error:s}}}_handleOpenIDConnectSignIn({id_token:e,nonce:t,client_id:r,issuer:s,provider:i}){return j(this,void 0,void 0,function*(){if(e&&t&&(r&&s||i))try{const{data:o,error:c}=yield this.api.signInWithOpenIDConnect({id_token:e,nonce:t,client_id:r,issuer:s,provider:i});return c||!o?{user:null,session:null,error:c}:(this._saveSession(o),this._notifyAllSubscribers("SIGNED_IN"),{user:o.user,session:o,error:null})}catch(o){return{user:null,session:null,error:o}}throw new Error("You must provide a OpenID Connect provider with your id token and nonce.")})}_recoverSession(){try{const e=ur(this.localStorage,ve);if(!e)return null;const{currentSession:t,expiresAt:r}=e,s=Math.round(Date.now()/1e3);r>=s+Ee&&(t!=null&&t.user)&&(this._saveSession(t),this._notifyAllSubscribers("SIGNED_IN"))}catch(e){console.log("error",e)}}_recoverAndRefresh(){return j(this,void 0,void 0,function*(){try{const e=yield lr(this.localStorage,ve);if(!e)return null;const{currentSession:t,expiresAt:r}=e,s=Math.round(Date.now()/1e3);if(r<s+Ee)if(this.autoRefreshToken&&t.refresh_token){this.networkRetries++;const{error:i}=yield this._callRefreshToken(t.refresh_token);if(i){if(console.log(i.message),i.message===Q.ERROR_MESSAGE&&this.networkRetries<Q.MAX_RETRIES){this.refreshTokenTimer&&clearTimeout(this.refreshTokenTimer),this.refreshTokenTimer=setTimeout(()=>this._recoverAndRefresh(),Math.pow(Q.RETRY_INTERVAL,this.networkRetries)*100);return}yield this._removeSession()}this.networkRetries=0}else this._removeSession();else t?(this._saveSession(t),this._notifyAllSubscribers("SIGNED_IN")):(console.log("Current session is missing data."),this._removeSession())}catch(e){return console.error(e),null}})}_callRefreshToken(e){var t;return e===void 0&&(e=(t=this.currentSession)===null||t===void 0?void 0:t.refresh_token),j(this,void 0,void 0,function*(){try{if(!e)throw new Error("No current session.");const{data:r,error:s}=yield this.api.refreshAccessToken(e);if(s)throw s;if(!r)throw Error("Invalid session data.");return this._saveSession(r),this._notifyAllSubscribers("TOKEN_REFRESHED"),this._notifyAllSubscribers("SIGNED_IN"),{data:r,error:null}}catch(r){return{data:null,error:r}}})}_notifyAllSubscribers(e){this.stateChangeEmitters.forEach(t=>t.callback(e,this.currentSession))}_saveSession(e){this.currentSession=e,this.currentUser=e.user;const t=e.expires_at;if(t){const r=Math.round(Date.now()/1e3),s=t-r,i=s>Ee?Ee:.5;this._startAutoRefreshToken((s-i)*1e3)}this.persistSession&&e.expires_at&&this._persistSession(this.currentSession)}_persistSession(e){const t={currentSession:e,expiresAt:e.expires_at};cr(this.localStorage,ve,t)}_removeSession(){return j(this,void 0,void 0,function*(){this.currentSession=null,this.currentUser=null,this.refreshTokenTimer&&clearTimeout(this.refreshTokenTimer),hr(this.localStorage,ve)})}_startAutoRefreshToken(e){this.refreshTokenTimer&&clearTimeout(this.refreshTokenTimer),!(e<=0||!this.autoRefreshToken)&&(this.refreshTokenTimer=setTimeout(()=>j(this,void 0,void 0,function*(){this.networkRetries++;const{error:t}=yield this._callRefreshToken();t||(this.networkRetries=0),(t==null?void 0:t.message)===Q.ERROR_MESSAGE&&this.networkRetries<Q.MAX_RETRIES&&this._startAutoRefreshToken(Math.pow(Q.RETRY_INTERVAL,this.networkRetries)*100)}),e),typeof this.refreshTokenTimer.unref=="function"&&this.refreshTokenTimer.unref())}_listenForMultiTabEvents(){if(!this.multiTab||!G()||!(window!=null&&window.addEventListener))return!1;try{window==null||window.addEventListener("storage",e=>{var t;if(e.key===ve){const r=JSON.parse(String(e.newValue));!((t=r==null?void 0:r.currentSession)===null||t===void 0)&&t.access_token?(this._saveSession(r.currentSession),this._notifyAllSubscribers("SIGNED_IN")):(this._removeSession(),this._notifyAllSubscribers("SIGNED_OUT"))}})}catch(e){console.error("_listenForMultiTabEvents",e)}}_handleVisibilityChange(){if(!this.multiTab||!G()||!(window!=null&&window.addEventListener))return!1;try{window==null||window.addEventListener("visibilitychange",()=>{document.visibilityState==="visible"&&this._recoverAndRefresh()})}catch(e){console.error("_handleVisibilityChange",e)}}}class vr extends _r{constructor(e){super(e)}}var at=globalThis&&globalThis.__awaiter||function(n,e,t,r){function s(i){return i instanceof t?i:new t(function(o){o(i)})}return new(t||(t=Promise))(function(i,o){function c(a){try{l(r.next(a))}catch(h){o(h)}}function u(a){try{l(r.throw(a))}catch(h){o(h)}}function l(a){a.done?i(a.value):s(a.value).then(c,u)}l((r=r.apply(n,e||[])).next())})};class We{constructor(e){Object.assign(this,e);let t;e.fetch?t=e.fetch:typeof fetch>"u"?t=(...r)=>at(this,void 0,void 0,function*(){return yield(yield Ce(()=>import("./browser-ponyfill-9071d88c.js").then(s=>s.b),[])).fetch(...r)}):t=fetch,this.fetch=(...r)=>t(...r),this.shouldThrowOnError=e.shouldThrowOnError||!1,this.allowEmpty=e.allowEmpty||!1}throwOnError(e){return e==null&&(e=!0),this.shouldThrowOnError=e,this}then(e,t){typeof this.schema>"u"||(["GET","HEAD"].includes(this.method)?this.headers["Accept-Profile"]=this.schema:this.headers["Content-Profile"]=this.schema),this.method!=="GET"&&this.method!=="HEAD"&&(this.headers["Content-Type"]="application/json");let r=this.fetch(this.url.toString(),{method:this.method,headers:this.headers,body:JSON.stringify(this.body),signal:this.signal}).then(s=>at(this,void 0,void 0,function*(){var i,o,c,u;let l=null,a=null,h=null,f=s.status,v=s.statusText;if(s.ok){const g=(i=this.headers.Prefer)===null||i===void 0?void 0:i.split(",").includes("return=minimal");if(this.method!=="HEAD"&&!g){const P=yield s.text();P&&(this.headers.Accept==="text/csv"?a=P:a=JSON.parse(P))}const E=(o=this.headers.Prefer)===null||o===void 0?void 0:o.match(/count=(exact|planned|estimated)/),$=(c=s.headers.get("content-range"))===null||c===void 0?void 0:c.split("/");E&&$&&$.length>1&&(h=parseInt($[1]))}else{const g=yield s.text();try{l=JSON.parse(g)}catch{l={message:g}}if(l&&this.allowEmpty&&(!((u=l==null?void 0:l.details)===null||u===void 0)&&u.includes("Results contain 0 rows"))&&(l=null,f=200,v="OK"),l&&this.shouldThrowOnError)throw l}return{error:l,data:a,count:h,status:f,statusText:v,body:a}}));return this.shouldThrowOnError||(r=r.catch(s=>({error:{message:`FetchError: ${s.message}`,details:"",hint:"",code:s.code||""},data:null,body:null,count:null,status:400,statusText:"Bad Request"}))),r.then(e,t)}}class gr extends We{select(e="*"){let t=!1;const r=e.split("").map(s=>/\s/.test(s)&&!t?"":(s==='"'&&(t=!t),s)).join("");return this.url.searchParams.set("select",r),this}order(e,{ascending:t=!0,nullsFirst:r=!1,foreignTable:s}={}){const i=typeof s>"u"?"order":`${s}.order`,o=this.url.searchParams.get(i);return this.url.searchParams.set(i,`${o?`${o},`:""}${e}.${t?"asc":"desc"}.${r?"nullsfirst":"nullslast"}`),this}limit(e,{foreignTable:t}={}){const r=typeof t>"u"?"limit":`${t}.limit`;return this.url.searchParams.set(r,`${e}`),this}range(e,t,{foreignTable:r}={}){const s=typeof r>"u"?"offset":`${r}.offset`,i=typeof r>"u"?"limit":`${r}.limit`;return this.url.searchParams.set(s,`${e}`),this.url.searchParams.set(i,`${t-e+1}`),this}abortSignal(e){return this.signal=e,this}single(){return this.headers.Accept="application/vnd.pgrst.object+json",this}maybeSingle(){return this.headers.Accept="application/vnd.pgrst.object+json",this.allowEmpty=!0,this}csv(){return this.headers.Accept="text/csv",this}}class de extends gr{constructor(){super(...arguments),this.cs=this.contains,this.cd=this.containedBy,this.sl=this.rangeLt,this.sr=this.rangeGt,this.nxl=this.rangeGte,this.nxr=this.rangeLte,this.adj=this.rangeAdjacent,this.ov=this.overlaps}not(e,t,r){return this.url.searchParams.append(`${e}`,`not.${t}.${r}`),this}or(e,{foreignTable:t}={}){const r=typeof t>"u"?"or":`${t}.or`;return this.url.searchParams.append(r,`(${e})`),this}eq(e,t){return this.url.searchParams.append(`${e}`,`eq.${t}`),this}neq(e,t){return this.url.searchParams.append(`${e}`,`neq.${t}`),this}gt(e,t){return this.url.searchParams.append(`${e}`,`gt.${t}`),this}gte(e,t){return this.url.searchParams.append(`${e}`,`gte.${t}`),this}lt(e,t){return this.url.searchParams.append(`${e}`,`lt.${t}`),this}lte(e,t){return this.url.searchParams.append(`${e}`,`lte.${t}`),this}like(e,t){return this.url.searchParams.append(`${e}`,`like.${t}`),this}ilike(e,t){return this.url.searchParams.append(`${e}`,`ilike.${t}`),this}is(e,t){return this.url.searchParams.append(`${e}`,`is.${t}`),this}in(e,t){const r=t.map(s=>typeof s=="string"&&new RegExp("[,()]").test(s)?`"${s}"`:`${s}`).join(",");return this.url.searchParams.append(`${e}`,`in.(${r})`),this}contains(e,t){return typeof t=="string"?this.url.searchParams.append(`${e}`,`cs.${t}`):Array.isArray(t)?this.url.searchParams.append(`${e}`,`cs.{${t.join(",")}}`):this.url.searchParams.append(`${e}`,`cs.${JSON.stringify(t)}`),this}containedBy(e,t){return typeof t=="string"?this.url.searchParams.append(`${e}`,`cd.${t}`):Array.isArray(t)?this.url.searchParams.append(`${e}`,`cd.{${t.join(",")}}`):this.url.searchParams.append(`${e}`,`cd.${JSON.stringify(t)}`),this}rangeLt(e,t){return this.url.searchParams.append(`${e}`,`sl.${t}`),this}rangeGt(e,t){return this.url.searchParams.append(`${e}`,`sr.${t}`),this}rangeGte(e,t){return this.url.searchParams.append(`${e}`,`nxl.${t}`),this}rangeLte(e,t){return this.url.searchParams.append(`${e}`,`nxr.${t}`),this}rangeAdjacent(e,t){return this.url.searchParams.append(`${e}`,`adj.${t}`),this}overlaps(e,t){return typeof t=="string"?this.url.searchParams.append(`${e}`,`ov.${t}`):this.url.searchParams.append(`${e}`,`ov.{${t.join(",")}}`),this}textSearch(e,t,{config:r,type:s=null}={}){let i="";s==="plain"?i="pl":s==="phrase"?i="ph":s==="websearch"&&(i="w");const o=r===void 0?"":`(${r})`;return this.url.searchParams.append(`${e}`,`${i}fts${o}.${t}`),this}fts(e,t,{config:r}={}){const s=typeof r>"u"?"":`(${r})`;return this.url.searchParams.append(`${e}`,`fts${s}.${t}`),this}plfts(e,t,{config:r}={}){const s=typeof r>"u"?"":`(${r})`;return this.url.searchParams.append(`${e}`,`plfts${s}.${t}`),this}phfts(e,t,{config:r}={}){const s=typeof r>"u"?"":`(${r})`;return this.url.searchParams.append(`${e}`,`phfts${s}.${t}`),this}wfts(e,t,{config:r}={}){const s=typeof r>"u"?"":`(${r})`;return this.url.searchParams.append(`${e}`,`wfts${s}.${t}`),this}filter(e,t,r){return this.url.searchParams.append(`${e}`,`${t}.${r}`),this}match(e){return Object.keys(e).forEach(t=>{this.url.searchParams.append(`${t}`,`eq.${e[t]}`)}),this}}class bt extends We{constructor(e,{headers:t={},schema:r,fetch:s,shouldThrowOnError:i}={}){super({fetch:s,shouldThrowOnError:i}),this.url=new URL(e),this.headers=Object.assign({},t),this.schema=r}select(e="*",{head:t=!1,count:r=null}={}){this.method="GET";let s=!1;const i=e.split("").map(o=>/\s/.test(o)&&!s?"":(o==='"'&&(s=!s),o)).join("");return this.url.searchParams.set("select",i),r&&(this.headers.Prefer=`count=${r}`),t&&(this.method="HEAD"),new de(this)}insert(e,{upsert:t=!1,onConflict:r,returning:s="representation",count:i=null}={}){this.method="POST";const o=[`return=${s}`];if(t&&o.push("resolution=merge-duplicates"),t&&r!==void 0&&this.url.searchParams.set("on_conflict",r),this.body=e,i&&o.push(`count=${i}`),this.headers.Prefer&&o.unshift(this.headers.Prefer),this.headers.Prefer=o.join(","),Array.isArray(e)){const c=e.reduce((u,l)=>u.concat(Object.keys(l)),[]);if(c.length>0){const u=[...new Set(c)].map(l=>`"${l}"`);this.url.searchParams.set("columns",u.join(","))}}return new de(this)}upsert(e,{onConflict:t,returning:r="representation",count:s=null,ignoreDuplicates:i=!1}={}){this.method="POST";const o=[`resolution=${i?"ignore":"merge"}-duplicates`,`return=${r}`];return t!==void 0&&this.url.searchParams.set("on_conflict",t),this.body=e,s&&o.push(`count=${s}`),this.headers.Prefer&&o.unshift(this.headers.Prefer),this.headers.Prefer=o.join(","),new de(this)}update(e,{returning:t="representation",count:r=null}={}){this.method="PATCH";const s=[`return=${t}`];return this.body=e,r&&s.push(`count=${r}`),this.headers.Prefer&&s.unshift(this.headers.Prefer),this.headers.Prefer=s.join(","),new de(this)}delete({returning:e="representation",count:t=null}={}){this.method="DELETE";const r=[`return=${e}`];return t&&r.push(`count=${t}`),this.headers.Prefer&&r.unshift(this.headers.Prefer),this.headers.Prefer=r.join(","),new de(this)}}class yr extends We{constructor(e,{headers:t={},schema:r,fetch:s,shouldThrowOnError:i}={}){super({fetch:s,shouldThrowOnError:i}),this.url=new URL(e),this.headers=Object.assign({},t),this.schema=r}rpc(e,{head:t=!1,count:r=null}={}){return t?(this.method="HEAD",e&&Object.entries(e).forEach(([s,i])=>{this.url.searchParams.append(s,i)})):(this.method="POST",this.body=e),r&&(this.headers.Prefer!==void 0?this.headers.Prefer+=`,count=${r}`:this.headers.Prefer=`count=${r}`),new de(this)}}const br="0.37.4",wr={"X-Client-Info":`postgrest-js/${br}`};class kr{constructor(e,{headers:t={},schema:r,fetch:s,throwOnError:i}={}){this.url=e,this.headers=Object.assign(Object.assign({},wr),t),this.schema=r,this.fetch=s,this.shouldThrowOnError=i}auth(e){return this.headers.Authorization=`Bearer ${e}`,this}from(e){const t=`${this.url}/${e}`;return new bt(t,{headers:this.headers,schema:this.schema,fetch:this.fetch,shouldThrowOnError:this.shouldThrowOnError})}rpc(e,t,{head:r=!1,count:s=null}={}){const i=`${this.url}/rpc/${e}`;return new yr(i,{headers:this.headers,schema:this.schema,fetch:this.fetch,shouldThrowOnError:this.shouldThrowOnError}).rpc(t,{head:r,count:s})}}var y;(function(n){n.abstime="abstime",n.bool="bool",n.date="date",n.daterange="daterange",n.float4="float4",n.float8="float8",n.int2="int2",n.int4="int4",n.int4range="int4range",n.int8="int8",n.int8range="int8range",n.json="json",n.jsonb="jsonb",n.money="money",n.numeric="numeric",n.oid="oid",n.reltime="reltime",n.text="text",n.time="time",n.timestamp="timestamp",n.timestamptz="timestamptz",n.timetz="timetz",n.tsrange="tsrange",n.tstzrange="tstzrange"})(y||(y={}));const ct=(n,e,t={})=>{var r;const s=(r=t.skipTypes)!==null&&r!==void 0?r:[];return Object.keys(e).reduce((i,o)=>(i[o]=Tr(o,n,e,s),i),{})},Tr=(n,e,t,r)=>{const s=e.find(c=>c.name===n),i=s==null?void 0:s.type,o=t[n];return i&&!r.includes(i)?wt(i,o):ze(o)},wt=(n,e)=>{if(n.charAt(0)==="_"){const t=n.slice(1,n.length);return Or(e,t)}switch(n){case y.bool:return Er(e);case y.float4:case y.float8:case y.int2:case y.int4:case y.int8:case y.numeric:case y.oid:return $r(e);case y.json:case y.jsonb:return Sr(e);case y.timestamp:return Rr(e);case y.abstime:case y.date:case y.daterange:case y.int4range:case y.int8range:case y.money:case y.reltime:case y.text:case y.time:case y.timestamptz:case y.timetz:case y.tsrange:case y.tstzrange:return ze(e);default:return ze(e)}},ze=n=>n,Er=n=>{switch(n){case"t":return!0;case"f":return!1;default:return n}},$r=n=>{if(typeof n=="string"){const e=parseFloat(n);if(!Number.isNaN(e))return e}return n},Sr=n=>{if(typeof n=="string")try{return JSON.parse(n)}catch(e){return console.log(`JSON parse error: ${e}`),n}return n},Or=(n,e)=>{if(typeof n!="string")return n;const t=n.length-1,r=n[t];if(n[0]==="{"&&r==="}"){let i;const o=n.slice(1,t);try{i=JSON.parse("["+o+"]")}catch{i=o?o.split(","):[]}return i.map(c=>wt(e,c))}return n},Rr=n=>typeof n=="string"?n.replace(" ","T"):n;var Le,lt;function jr(){if(lt)return Le;lt=1;var n=function(){if(typeof self=="object"&&self)return self;if(typeof window=="object"&&window)return window;throw new Error("Unable to resolve global `this`")};return Le=function(){if(this)return this;if(typeof globalThis=="object"&&globalThis)return globalThis;try{Object.defineProperty(Object.prototype,"__global__",{get:function(){return this},configurable:!0})}catch{return n()}try{return __global__||n()}finally{delete Object.prototype.__global__}}(),Le}const Cr="websocket",xr="Websocket Client & Server Library implementing the WebSocket protocol as specified in RFC 6455.",Ar=["websocket","websockets","socket","networking","comet","push","RFC-6455","realtime","server","client"],Ir="Brian McKelvey <theturtle32@gmail.com> (https://github.com/theturtle32)",Pr=["Iñaki Baz Castillo <ibc@aliax.net> (http://dev.sipdoc.net)"],Ur="1.0.34",Nr={type:"git",url:"https://github.com/theturtle32/WebSocket-Node.git"},Dr="https://github.com/theturtle32/WebSocket-Node",Lr={node:">=4.0.0"},Mr={bufferutil:"^4.0.1",debug:"^2.2.0","es5-ext":"^0.10.50","typedarray-to-buffer":"^3.1.5","utf-8-validate":"^5.0.2",yaeti:"^0.0.6"},Br={"buffer-equal":"^1.0.0",gulp:"^4.0.2","gulp-jshint":"^2.0.4","jshint-stylish":"^2.2.1",jshint:"^2.0.0",tape:"^4.9.1"},Fr={verbose:!1},Gr={test:"tape test/unit/*.js",gulp:"gulp"},Hr="index",zr={lib:"./lib"},Jr="lib/browser.js",qr="Apache-2.0",Wr={name:Cr,description:xr,keywords:Ar,author:Ir,contributors:Pr,version:Ur,repository:Nr,homepage:Dr,engines:Lr,dependencies:Mr,devDependencies:Br,config:Fr,scripts:Gr,main:Hr,directories:zr,browser:Jr,license:qr};var Kr=Wr.version,Z;if(typeof globalThis=="object")Z=globalThis;else try{Z=jr()}catch{}finally{if(!Z&&typeof window<"u"&&(Z=window),!Z)throw new Error("Could not determine global this")}var we=Z.WebSocket||Z.MozWebSocket,Yr=Kr;function kt(n,e){var t;return e?t=new we(n,e):t=new we(n),t}we&&["CONNECTING","OPEN","CLOSING","CLOSED"].forEach(function(n){Object.defineProperty(kt,n,{get:function(){return we[n]}})});var Vr={w3cwebsocket:we?kt:null,version:Yr};const Xr="1.7.5",Qr={"X-Client-Info":`realtime-js/${Xr}`},Zr="1.0.0",Tt=1e4,en=1e3;var ye;(function(n){n[n.connecting=0]="connecting",n[n.open=1]="open",n[n.closing=2]="closing",n[n.closed=3]="closed"})(ye||(ye={}));var x;(function(n){n.closed="closed",n.errored="errored",n.joined="joined",n.joining="joining",n.leaving="leaving"})(x||(x={}));var M;(function(n){n.close="phx_close",n.error="phx_error",n.join="phx_join",n.reply="phx_reply",n.leave="phx_leave",n.access_token="access_token"})(M||(M={}));var Je;(function(n){n.websocket="websocket"})(Je||(Je={}));var ee;(function(n){n.Connecting="connecting",n.Open="open",n.Closing="closing",n.Closed="closed"})(ee||(ee={}));class Et{constructor(e,t){this.callback=e,this.timerCalc=t,this.timer=void 0,this.tries=0,this.callback=e,this.timerCalc=t}reset(){this.tries=0,clearTimeout(this.timer)}scheduleTimeout(){clearTimeout(this.timer),this.timer=setTimeout(()=>{this.tries=this.tries+1,this.callback()},this.timerCalc(this.tries+1))}}class tn{constructor(){this.HEADER_LENGTH=1}decode(e,t){return e.constructor===ArrayBuffer?t(this._binaryDecode(e)):t(typeof e=="string"?JSON.parse(e):{})}_binaryDecode(e){const t=new DataView(e),r=new TextDecoder;return this._decodeBroadcast(e,t,r)}_decodeBroadcast(e,t,r){const s=t.getUint8(1),i=t.getUint8(2);let o=this.HEADER_LENGTH+2;const c=r.decode(e.slice(o,o+s));o=o+s;const u=r.decode(e.slice(o,o+i));o=o+i;const l=JSON.parse(r.decode(e.slice(o,e.byteLength)));return{ref:null,topic:c,event:u,payload:l}}}class Me{constructor(e,t,r={},s=Tt){this.channel=e,this.event=t,this.payload=r,this.timeout=s,this.sent=!1,this.timeoutTimer=void 0,this.ref="",this.receivedResp=null,this.recHooks=[],this.refEvent=null}resend(e){this.timeout=e,this._cancelRefEvent(),this.ref="",this.refEvent=null,this.receivedResp=null,this.sent=!1,this.send()}send(){this._hasReceived("timeout")||(this.startTimeout(),this.sent=!0,this.channel.socket.push({topic:this.channel.topic,event:this.event,payload:this.payload,ref:this.ref,join_ref:this.channel.joinRef()}))}updatePayload(e){this.payload=Object.assign(Object.assign({},this.payload),e)}receive(e,t){var r;return this._hasReceived(e)&&t((r=this.receivedResp)===null||r===void 0?void 0:r.response),this.recHooks.push({status:e,callback:t}),this}startTimeout(){if(this.timeoutTimer)return;this.ref=this.channel.socket.makeRef(),this.refEvent=this.channel.replyEventName(this.ref);const e=t=>{this._cancelRefEvent(),this._cancelTimeout(),this.receivedResp=t,this._matchReceive(t)};this.channel.on(this.refEvent,e),this.timeoutTimer=setTimeout(()=>{this.trigger("timeout",{})},this.timeout)}trigger(e,t){this.refEvent&&this.channel.trigger(this.refEvent,{status:e,response:t})}destroy(){this._cancelRefEvent(),this._cancelTimeout()}_cancelRefEvent(){this.refEvent&&this.channel.off(this.refEvent)}_cancelTimeout(){clearTimeout(this.timeoutTimer),this.timeoutTimer=void 0}_matchReceive({status:e,response:t}){this.recHooks.filter(r=>r.status===e).forEach(r=>r.callback(t))}_hasReceived(e){return this.receivedResp&&this.receivedResp.status===e}}class rn{constructor(e,t={},r){this.topic=e,this.params=t,this.socket=r,this.bindings=[],this.state=x.closed,this.joinedOnce=!1,this.pushBuffer=[],this.timeout=this.socket.timeout,this.joinPush=new Me(this,M.join,this.params,this.timeout),this.rejoinTimer=new Et(()=>this.rejoinUntilConnected(),this.socket.reconnectAfterMs),this.joinPush.receive("ok",()=>{this.state=x.joined,this.rejoinTimer.reset(),this.pushBuffer.forEach(s=>s.send()),this.pushBuffer=[]}),this.onClose(()=>{this.rejoinTimer.reset(),this.socket.log("channel",`close ${this.topic} ${this.joinRef()}`),this.state=x.closed,this.socket.remove(this)}),this.onError(s=>{this.isLeaving()||this.isClosed()||(this.socket.log("channel",`error ${this.topic}`,s),this.state=x.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("timeout",()=>{this.isJoining()&&(this.socket.log("channel",`timeout ${this.topic}`,this.joinPush.timeout),this.state=x.errored,this.rejoinTimer.scheduleTimeout())}),this.on(M.reply,(s,i)=>{this.trigger(this.replyEventName(i),s)})}rejoinUntilConnected(){this.rejoinTimer.scheduleTimeout(),this.socket.isConnected()&&this.rejoin()}subscribe(e=this.timeout){if(this.joinedOnce)throw"tried to subscribe multiple times. 'subscribe' can only be called a single time per channel instance";return this.joinedOnce=!0,this.rejoin(e),this.joinPush}onClose(e){this.on(M.close,e)}onError(e){this.on(M.error,t=>e(t))}on(e,t){this.bindings.push({event:e,callback:t})}off(e){this.bindings=this.bindings.filter(t=>t.event!==e)}canPush(){return this.socket.isConnected()&&this.isJoined()}push(e,t,r=this.timeout){if(!this.joinedOnce)throw`tried to push '${e}' to '${this.topic}' before joining. Use channel.subscribe() before pushing events`;let s=new Me(this,e,t,r);return this.canPush()?s.send():(s.startTimeout(),this.pushBuffer.push(s)),s}updateJoinPayload(e){this.joinPush.updatePayload(e)}unsubscribe(e=this.timeout){this.state=x.leaving;let t=()=>{this.socket.log("channel",`leave ${this.topic}`),this.trigger(M.close,"leave",this.joinRef())};this.joinPush.destroy();let r=new Me(this,M.leave,{},e);return r.receive("ok",()=>t()).receive("timeout",()=>t()),r.send(),this.canPush()||r.trigger("ok",{}),r}onMessage(e,t,r){return t}isMember(e){return this.topic===e}joinRef(){return this.joinPush.ref}rejoin(e=this.timeout){this.isLeaving()||(this.socket.leaveOpenTopic(this.topic),this.state=x.joining,this.joinPush.resend(e))}trigger(e,t,r){let{close:s,error:i,leave:o,join:c}=M;if(r&&[s,i,o,c].indexOf(e)>=0&&r!==this.joinRef())return;let l=this.onMessage(e,t,r);if(t&&!l)throw"channel onMessage callbacks must return the payload, modified or unmodified";this.bindings.filter(a=>a.event==="*"?e===(t==null?void 0:t.type):a.event===e).map(a=>a.callback(l,r))}replyEventName(e){return`chan_reply_${e}`}isClosed(){return this.state===x.closed}isErrored(){return this.state===x.errored}isJoined(){return this.state===x.joined}isJoining(){return this.state===x.joining}isLeaving(){return this.state===x.leaving}}var nn=globalThis&&globalThis.__awaiter||function(n,e,t,r){function s(i){return i instanceof t?i:new t(function(o){o(i)})}return new(t||(t=Promise))(function(i,o){function c(a){try{l(r.next(a))}catch(h){o(h)}}function u(a){try{l(r.throw(a))}catch(h){o(h)}}function l(a){a.done?i(a.value):s(a.value).then(c,u)}l((r=r.apply(n,e||[])).next())})};const sn=()=>{};class on{constructor(e,t){this.accessToken=null,this.channels=[],this.endPoint="",this.headers=Qr,this.params={},this.timeout=Tt,this.transport=Vr.w3cwebsocket,this.heartbeatIntervalMs=3e4,this.longpollerTimeout=2e4,this.heartbeatTimer=void 0,this.pendingHeartbeatRef=null,this.ref=0,this.logger=sn,this.conn=null,this.sendBuffer=[],this.serializer=new tn,this.stateChangeCallbacks={open:[],close:[],error:[],message:[]},this.endPoint=`${e}/${Je.websocket}`,t!=null&&t.params&&(this.params=t.params),t!=null&&t.headers&&(this.headers=Object.assign(Object.assign({},this.headers),t.headers)),t!=null&&t.timeout&&(this.timeout=t.timeout),t!=null&&t.logger&&(this.logger=t.logger),t!=null&&t.transport&&(this.transport=t.transport),t!=null&&t.heartbeatIntervalMs&&(this.heartbeatIntervalMs=t.heartbeatIntervalMs),t!=null&&t.longpollerTimeout&&(this.longpollerTimeout=t.longpollerTimeout),this.reconnectAfterMs=t!=null&&t.reconnectAfterMs?t.reconnectAfterMs:r=>[1e3,2e3,5e3,1e4][r-1]||1e4,this.encode=t!=null&&t.encode?t.encode:(r,s)=>s(JSON.stringify(r)),this.decode=t!=null&&t.decode?t.decode:this.serializer.decode.bind(this.serializer),this.reconnectTimer=new Et(()=>nn(this,void 0,void 0,function*(){yield this.disconnect(),this.connect()}),this.reconnectAfterMs)}connect(){this.conn||(this.conn=new this.transport(this.endPointURL(),[],null,this.headers),this.conn&&(this.conn.binaryType="arraybuffer",this.conn.onopen=()=>this._onConnOpen(),this.conn.onerror=e=>this._onConnError(e),this.conn.onmessage=e=>this.onConnMessage(e),this.conn.onclose=e=>this._onConnClose(e)))}disconnect(e,t){return new Promise((r,s)=>{try{this.conn&&(this.conn.onclose=function(){},e?this.conn.close(e,t||""):this.conn.close(),this.conn=null,this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.reconnectTimer.reset()),r({error:null,data:!0})}catch(i){r({error:i,data:!1})}})}log(e,t,r){this.logger(e,t,r)}onOpen(e){this.stateChangeCallbacks.open.push(e)}onClose(e){this.stateChangeCallbacks.close.push(e)}onError(e){this.stateChangeCallbacks.error.push(e)}onMessage(e){this.stateChangeCallbacks.message.push(e)}connectionState(){switch(this.conn&&this.conn.readyState){case ye.connecting:return ee.Connecting;case ye.open:return ee.Open;case ye.closing:return ee.Closing;default:return ee.Closed}}isConnected(){return this.connectionState()===ee.Open}remove(e){this.channels=this.channels.filter(t=>t.joinRef()!==e.joinRef())}channel(e,t={}){const r=new rn(e,t,this);return this.channels.push(r),r}push(e){const{topic:t,event:r,payload:s,ref:i}=e;let o=()=>{this.encode(e,c=>{var u;(u=this.conn)===null||u===void 0||u.send(c)})};this.log("push",`${t} ${r} (${i})`,s),this.isConnected()?o():this.sendBuffer.push(o)}onConnMessage(e){this.decode(e.data,t=>{let{topic:r,event:s,payload:i,ref:o}=t;(o&&o===this.pendingHeartbeatRef||s===(i==null?void 0:i.type))&&(this.pendingHeartbeatRef=null),this.log("receive",`${i.status||""} ${r} ${s} ${o&&"("+o+")"||""}`,i),this.channels.filter(c=>c.isMember(r)).forEach(c=>c.trigger(s,i,o)),this.stateChangeCallbacks.message.forEach(c=>c(t))})}endPointURL(){return this._appendParams(this.endPoint,Object.assign({},this.params,{vsn:Zr}))}makeRef(){let e=this.ref+1;return e===this.ref?this.ref=0:this.ref=e,this.ref.toString()}setAuth(e){this.accessToken=e,this.channels.forEach(t=>{e&&t.updateJoinPayload({user_token:e}),t.joinedOnce&&t.isJoined()&&t.push(M.access_token,{access_token:e})})}leaveOpenTopic(e){let t=this.channels.find(r=>r.topic===e&&(r.isJoined()||r.isJoining()));t&&(this.log("transport",`leaving duplicate topic "${e}"`),t.unsubscribe())}_onConnOpen(){this.log("transport",`connected to ${this.endPointURL()}`),this._flushSendBuffer(),this.reconnectTimer.reset(),this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.heartbeatTimer=setInterval(()=>this._sendHeartbeat(),this.heartbeatIntervalMs),this.stateChangeCallbacks.open.forEach(e=>e())}_onConnClose(e){this.log("transport","close",e),this._triggerChanError(),this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.reconnectTimer.scheduleTimeout(),this.stateChangeCallbacks.close.forEach(t=>t(e))}_onConnError(e){this.log("transport",e.message),this._triggerChanError(),this.stateChangeCallbacks.error.forEach(t=>t(e))}_triggerChanError(){this.channels.forEach(e=>e.trigger(M.error))}_appendParams(e,t){if(Object.keys(t).length===0)return e;const r=e.match(/\?/)?"&":"?",s=new URLSearchParams(t);return`${e}${r}${s}`}_flushSendBuffer(){this.isConnected()&&this.sendBuffer.length>0&&(this.sendBuffer.forEach(e=>e()),this.sendBuffer=[])}_sendHeartbeat(){var e;if(this.isConnected()){if(this.pendingHeartbeatRef){this.pendingHeartbeatRef=null,this.log("transport","heartbeat timeout. Attempting to re-establish connection"),(e=this.conn)===null||e===void 0||e.close(en,"hearbeat timeout");return}this.pendingHeartbeatRef=this.makeRef(),this.push({topic:"phoenix",event:"heartbeat",payload:{},ref:this.pendingHeartbeatRef}),this.setAuth(this.accessToken)}}}class an{constructor(e,t,r,s){const i={},o=s==="*"?`realtime:${r}`:`realtime:${r}:${s}`,c=t.Authorization.split(" ")[1];c&&(i.user_token=c),this.subscription=e.channel(o,i)}getPayloadRecords(e){const t={new:{},old:{}};return(e.type==="INSERT"||e.type==="UPDATE")&&(t.new=ct(e.columns,e.record)),(e.type==="UPDATE"||e.type==="DELETE")&&(t.old=ct(e.columns,e.old_record)),t}on(e,t){return this.subscription.on(e,r=>{let s={schema:r.schema,table:r.table,commit_timestamp:r.commit_timestamp,eventType:r.type,new:{},old:{},errors:r.errors};s=Object.assign(Object.assign({},s),this.getPayloadRecords(r)),t(s)}),this}subscribe(e=()=>{}){return this.subscription.onError(t=>e("SUBSCRIPTION_ERROR",t)),this.subscription.onClose(()=>e("CLOSED")),this.subscription.subscribe().receive("ok",()=>e("SUBSCRIBED")).receive("error",t=>e("SUBSCRIPTION_ERROR",t)).receive("timeout",()=>e("RETRYING_AFTER_TIMEOUT")),this.subscription}}class cn extends bt{constructor(e,{headers:t={},schema:r,realtime:s,table:i,fetch:o,shouldThrowOnError:c}){super(e,{headers:t,schema:r,fetch:o,shouldThrowOnError:c}),this._subscription=null,this._realtime=s,this._headers=t,this._schema=r,this._table=i}on(e,t){return this._realtime.isConnected()||this._realtime.connect(),this._subscription||(this._subscription=new an(this._realtime,this._headers,this._schema,this._table)),this._subscription.on(e,t)}}const ln="1.7.3",un={"X-Client-Info":`storage-js/${ln}`};var Te=globalThis&&globalThis.__awaiter||function(n,e,t,r){function s(i){return i instanceof t?i:new t(function(o){o(i)})}return new(t||(t=Promise))(function(i,o){function c(a){try{l(r.next(a))}catch(h){o(h)}}function u(a){try{l(r.throw(a))}catch(h){o(h)}}function l(a){a.done?i(a.value):s(a.value).then(c,u)}l((r=r.apply(n,e||[])).next())})};const hn=n=>n.msg||n.message||n.error_description||n.error||JSON.stringify(n),dn=(n,e)=>{if(typeof n.json!="function")return e(n);n.json().then(t=>e({message:hn(t),status:(n==null?void 0:n.status)||500}))},fn=(n,e,t,r)=>{const s={method:n,headers:(e==null?void 0:e.headers)||{}};return n==="GET"?s:(s.headers=Object.assign({"Content-Type":"application/json"},e==null?void 0:e.headers),s.body=JSON.stringify(r),Object.assign(Object.assign({},s),t))};function Ae(n,e,t,r,s,i){return Te(this,void 0,void 0,function*(){return new Promise((o,c)=>{n(t,fn(e,r,s,i)).then(u=>{if(!u.ok)throw u;return r!=null&&r.noResolveJson?o(u):u.json()}).then(u=>o(u)).catch(u=>dn(u,c))})})}function qe(n,e,t,r){return Te(this,void 0,void 0,function*(){return Ae(n,"GET",e,t,r)})}function te(n,e,t,r,s){return Te(this,void 0,void 0,function*(){return Ae(n,"POST",e,r,s,t)})}function pn(n,e,t,r,s){return Te(this,void 0,void 0,function*(){return Ae(n,"PUT",e,r,s,t)})}function $t(n,e,t,r,s){return Te(this,void 0,void 0,function*(){return Ae(n,"DELETE",e,r,s,t)})}var mn=globalThis&&globalThis.__awaiter||function(n,e,t,r){function s(i){return i instanceof t?i:new t(function(o){o(i)})}return new(t||(t=Promise))(function(i,o){function c(a){try{l(r.next(a))}catch(h){o(h)}}function u(a){try{l(r.throw(a))}catch(h){o(h)}}function l(a){a.done?i(a.value):s(a.value).then(c,u)}l((r=r.apply(n,e||[])).next())})};const St=n=>{let e;return n?e=n:typeof fetch>"u"?e=(...t)=>mn(void 0,void 0,void 0,function*(){return yield(yield Ce(()=>import("./browser-ponyfill-9071d88c.js").then(r=>r.b),[])).fetch(...t)}):e=fetch,(...t)=>e(...t)};var ue=globalThis&&globalThis.__awaiter||function(n,e,t,r){function s(i){return i instanceof t?i:new t(function(o){o(i)})}return new(t||(t=Promise))(function(i,o){function c(a){try{l(r.next(a))}catch(h){o(h)}}function u(a){try{l(r.throw(a))}catch(h){o(h)}}function l(a){a.done?i(a.value):s(a.value).then(c,u)}l((r=r.apply(n,e||[])).next())})};class _n{constructor(e,t={},r){this.url=e,this.headers=Object.assign(Object.assign({},un),t),this.fetch=St(r)}listBuckets(){return ue(this,void 0,void 0,function*(){try{return{data:yield qe(this.fetch,`${this.url}/bucket`,{headers:this.headers}),error:null}}catch(e){return{data:null,error:e}}})}getBucket(e){return ue(this,void 0,void 0,function*(){try{return{data:yield qe(this.fetch,`${this.url}/bucket/${e}`,{headers:this.headers}),error:null}}catch(t){return{data:null,error:t}}})}createBucket(e,t={public:!1}){return ue(this,void 0,void 0,function*(){try{return{data:(yield te(this.fetch,`${this.url}/bucket`,{id:e,name:e,public:t.public},{headers:this.headers})).name,error:null}}catch(r){return{data:null,error:r}}})}updateBucket(e,t){return ue(this,void 0,void 0,function*(){try{return{data:yield pn(this.fetch,`${this.url}/bucket/${e}`,{id:e,name:e,public:t.public},{headers:this.headers}),error:null}}catch(r){return{data:null,error:r}}})}emptyBucket(e){return ue(this,void 0,void 0,function*(){try{return{data:yield te(this.fetch,`${this.url}/bucket/${e}/empty`,{},{headers:this.headers}),error:null}}catch(t){return{data:null,error:t}}})}deleteBucket(e){return ue(this,void 0,void 0,function*(){try{return{data:yield $t(this.fetch,`${this.url}/bucket/${e}`,{},{headers:this.headers}),error:null}}catch(t){return{data:null,error:t}}})}}var B=globalThis&&globalThis.__awaiter||function(n,e,t,r){function s(i){return i instanceof t?i:new t(function(o){o(i)})}return new(t||(t=Promise))(function(i,o){function c(a){try{l(r.next(a))}catch(h){o(h)}}function u(a){try{l(r.throw(a))}catch(h){o(h)}}function l(a){a.done?i(a.value):s(a.value).then(c,u)}l((r=r.apply(n,e||[])).next())})};const vn={limit:100,offset:0,sortBy:{column:"name",order:"asc"}},gn={cacheControl:"3600",contentType:"text/plain;charset=UTF-8",upsert:!1};class yn{constructor(e,t={},r,s){this.url=e,this.headers=t,this.bucketId=r,this.fetch=St(s)}uploadOrUpdate(e,t,r,s){return B(this,void 0,void 0,function*(){try{let i;const o=Object.assign(Object.assign({},gn),s),c=Object.assign(Object.assign({},this.headers),e==="POST"&&{"x-upsert":String(o.upsert)});typeof Blob<"u"&&r instanceof Blob?(i=new FormData,i.append("cacheControl",o.cacheControl),i.append("",r)):typeof FormData<"u"&&r instanceof FormData?(i=r,i.append("cacheControl",o.cacheControl)):(i=r,c["cache-control"]=`max-age=${o.cacheControl}`,c["content-type"]=o.contentType);const u=this._removeEmptyFolders(t),l=this._getFinalPath(u),a=yield this.fetch(`${this.url}/object/${l}`,{method:e,body:i,headers:c});return a.ok?{data:{Key:l},error:null}:{data:null,error:yield a.json()}}catch(i){return{data:null,error:i}}})}upload(e,t,r){return B(this,void 0,void 0,function*(){return this.uploadOrUpdate("POST",e,t,r)})}update(e,t,r){return B(this,void 0,void 0,function*(){return this.uploadOrUpdate("PUT",e,t,r)})}move(e,t){return B(this,void 0,void 0,function*(){try{return{data:yield te(this.fetch,`${this.url}/object/move`,{bucketId:this.bucketId,sourceKey:e,destinationKey:t},{headers:this.headers}),error:null}}catch(r){return{data:null,error:r}}})}copy(e,t){return B(this,void 0,void 0,function*(){try{return{data:yield te(this.fetch,`${this.url}/object/copy`,{bucketId:this.bucketId,sourceKey:e,destinationKey:t},{headers:this.headers}),error:null}}catch(r){return{data:null,error:r}}})}createSignedUrl(e,t){return B(this,void 0,void 0,function*(){try{const r=this._getFinalPath(e);let s=yield te(this.fetch,`${this.url}/object/sign/${r}`,{expiresIn:t},{headers:this.headers});const i=`${this.url}${s.signedURL}`;return s={signedURL:i},{data:s,error:null,signedURL:i}}catch(r){return{data:null,error:r,signedURL:null}}})}createSignedUrls(e,t){return B(this,void 0,void 0,function*(){try{return{data:(yield te(this.fetch,`${this.url}/object/sign/${this.bucketId}`,{expiresIn:t,paths:e},{headers:this.headers})).map(s=>Object.assign(Object.assign({},s),{signedURL:s.signedURL?`${this.url}${s.signedURL}`:null})),error:null}}catch(r){return{data:null,error:r}}})}download(e){return B(this,void 0,void 0,function*(){try{const t=this._getFinalPath(e);return{data:yield(yield qe(this.fetch,`${this.url}/object/${t}`,{headers:this.headers,noResolveJson:!0})).blob(),error:null}}catch(t){return{data:null,error:t}}})}getPublicUrl(e){try{const t=this._getFinalPath(e),r=`${this.url}/object/public/${t}`;return{data:{publicURL:r},error:null,publicURL:r}}catch(t){return{data:null,error:t,publicURL:null}}}remove(e){return B(this,void 0,void 0,function*(){try{return{data:yield $t(this.fetch,`${this.url}/object/${this.bucketId}`,{prefixes:e},{headers:this.headers}),error:null}}catch(t){return{data:null,error:t}}})}list(e,t,r){return B(this,void 0,void 0,function*(){try{const s=Object.assign(Object.assign(Object.assign({},vn),t),{prefix:e||""});return{data:yield te(this.fetch,`${this.url}/object/list/${this.bucketId}`,s,{headers:this.headers},r),error:null}}catch(s){return{data:null,error:s}}})}_getFinalPath(e){return`${this.bucketId}/${e}`}_removeEmptyFolders(e){return e.replace(/^\/|\/$/g,"").replace(/\/+/g,"/")}}class bn extends _n{constructor(e,t={},r){super(e,t,r)}from(e){return new yn(this.url,this.headers,e,this.fetch)}}var wn=globalThis&&globalThis.__awaiter||function(n,e,t,r){function s(i){return i instanceof t?i:new t(function(o){o(i)})}return new(t||(t=Promise))(function(i,o){function c(a){try{l(r.next(a))}catch(h){o(h)}}function u(a){try{l(r.throw(a))}catch(h){o(h)}}function l(a){a.done?i(a.value):s(a.value).then(c,u)}l((r=r.apply(n,e||[])).next())})};const kn=n=>{let e;return n?e=n:typeof fetch>"u"?e=(...t)=>wn(void 0,void 0,void 0,function*(){return yield(yield Ce(()=>import("./browser-ponyfill-9071d88c.js").then(r=>r.b),[])).fetch(...t)}):e=fetch,(...t)=>e(...t)};var Tn=globalThis&&globalThis.__awaiter||function(n,e,t,r){function s(i){return i instanceof t?i:new t(function(o){o(i)})}return new(t||(t=Promise))(function(i,o){function c(a){try{l(r.next(a))}catch(h){o(h)}}function u(a){try{l(r.throw(a))}catch(h){o(h)}}function l(a){a.done?i(a.value):s(a.value).then(c,u)}l((r=r.apply(n,e||[])).next())})};class En{constructor(e,{headers:t={},customFetch:r}={}){this.url=e,this.headers=t,this.fetch=kn(r)}setAuth(e){this.headers.Authorization=`Bearer ${e}`}invoke(e,t){return Tn(this,void 0,void 0,function*(){try{const{headers:r,body:s}=t??{},i=yield this.fetch(`${this.url}/${e}`,{method:"POST",headers:Object.assign({},this.headers,r),body:s}),o=i.headers.get("x-relay-error");if(o&&o==="true")return{data:null,error:new Error(yield i.text())};let c;const{responseType:u}=t??{};return!u||u==="json"?c=yield i.json():u==="arrayBuffer"?c=yield i.arrayBuffer():u==="blob"?c=yield i.blob():c=yield i.text(),{data:c,error:null}}catch(r){return{data:null,error:r}}})}}var Be=globalThis&&globalThis.__awaiter||function(n,e,t,r){function s(i){return i instanceof t?i:new t(function(o){o(i)})}return new(t||(t=Promise))(function(i,o){function c(a){try{l(r.next(a))}catch(h){o(h)}}function u(a){try{l(r.throw(a))}catch(h){o(h)}}function l(a){a.done?i(a.value):s(a.value).then(c,u)}l((r=r.apply(n,e||[])).next())})};const $n={schema:"public",autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,multiTab:!0,headers:yt};class Sn{constructor(e,t,r){if(this.supabaseUrl=e,this.supabaseKey=t,!e)throw new Error("supabaseUrl is required.");if(!t)throw new Error("supabaseKey is required.");const s=Jt(e),i=Object.assign(Object.assign({},$n),r);if(this.restUrl=`${s}/rest/v1`,this.realtimeUrl=`${s}/realtime/v1`.replace("http","ws"),this.authUrl=`${s}/auth/v1`,this.storageUrl=`${s}/storage/v1`,s.match(/(supabase\.co)|(supabase\.in)/)){const c=s.split(".");this.functionsUrl=`${c[0]}.functions.${c[1]}.${c[2]}`}else this.functionsUrl=`${s}/functions/v1`;this.schema=i.schema,this.multiTab=i.multiTab,this.fetch=i.fetch,this.headers=Object.assign(Object.assign({},yt),r==null?void 0:r.headers),this.shouldThrowOnError=i.shouldThrowOnError||!1,this.auth=this._initSupabaseAuthClient(i),this.realtime=this._initRealtimeClient(Object.assign({headers:this.headers},i.realtime)),this._listenForAuthEvents(),this._listenForMultiTabEvents()}get functions(){return new En(this.functionsUrl,{headers:this._getAuthHeaders(),customFetch:this.fetch})}get storage(){return new bn(this.storageUrl,this._getAuthHeaders(),this.fetch)}from(e){const t=`${this.restUrl}/${e}`;return new cn(t,{headers:this._getAuthHeaders(),schema:this.schema,realtime:this.realtime,table:e,fetch:this.fetch,shouldThrowOnError:this.shouldThrowOnError})}rpc(e,t,{head:r=!1,count:s=null}={}){return this._initPostgRESTClient().rpc(e,t,{head:r,count:s})}removeAllSubscriptions(){return Be(this,void 0,void 0,function*(){const e=this.getSubscriptions().slice(),t=e.map(s=>this.removeSubscription(s));return(yield Promise.all(t)).map(({error:s},i)=>({data:{subscription:e[i]},error:s}))})}removeSubscription(e){return Be(this,void 0,void 0,function*(){const{error:t}=yield this._closeSubscription(e),r=this.getSubscriptions(),s=r.filter(i=>i.isJoined()).length;return r.length===0&&(yield this.realtime.disconnect()),{data:{openSubscriptions:s},error:t}})}_closeSubscription(e){return Be(this,void 0,void 0,function*(){let t=null;if(!e.isClosed()){const{error:r}=yield this._unsubscribeSubscription(e);t=r}return this.realtime.remove(e),{error:t}})}_unsubscribeSubscription(e){return new Promise(t=>{e.unsubscribe().receive("ok",()=>t({error:null})).receive("error",r=>t({error:r})).receive("timeout",()=>t({error:new Error("timed out")}))})}getSubscriptions(){return this.realtime.channels}_initSupabaseAuthClient({autoRefreshToken:e,persistSession:t,detectSessionInUrl:r,localStorage:s,headers:i,fetch:o,cookieOptions:c,multiTab:u}){const l={Authorization:`Bearer ${this.supabaseKey}`,apikey:`${this.supabaseKey}`};return new vr({url:this.authUrl,headers:Object.assign(Object.assign({},i),l),autoRefreshToken:e,persistSession:t,detectSessionInUrl:r,localStorage:s,fetch:o,cookieOptions:c,multiTab:u})}_initRealtimeClient(e){return new on(this.realtimeUrl,Object.assign(Object.assign({},e),{params:Object.assign(Object.assign({},e==null?void 0:e.params),{apikey:this.supabaseKey})}))}_initPostgRESTClient(){return new kr(this.restUrl,{headers:this._getAuthHeaders(),schema:this.schema,fetch:this.fetch,throwOnError:this.shouldThrowOnError})}_getAuthHeaders(){var e,t;const r=Object.assign({},this.headers),s=(t=(e=this.auth.session())===null||e===void 0?void 0:e.access_token)!==null&&t!==void 0?t:this.supabaseKey;return r.apikey=this.supabaseKey,r.Authorization=r.Authorization||`Bearer ${s}`,r}_listenForMultiTabEvents(){if(!this.multiTab||!qt()||!(window!=null&&window.addEventListener))return null;try{return window==null?void 0:window.addEventListener("storage",e=>{var t,r,s;if(e.key===zt){const i=JSON.parse(String(e.newValue)),o=(r=(t=i==null?void 0:i.currentSession)===null||t===void 0?void 0:t.access_token)!==null&&r!==void 0?r:void 0,c=(s=this.auth.session())===null||s===void 0?void 0:s.access_token;o?!c&&o?this._handleTokenChanged("SIGNED_IN",o,"STORAGE"):c!==o&&this._handleTokenChanged("TOKEN_REFRESHED",o,"STORAGE"):this._handleTokenChanged("SIGNED_OUT",o,"STORAGE")}})}catch(e){return console.error("_listenForMultiTabEvents",e),null}}_listenForAuthEvents(){let{data:e}=this.auth.onAuthStateChange((t,r)=>{this._handleTokenChanged(t,r==null?void 0:r.access_token,"CLIENT")});return e}_handleTokenChanged(e,t,r){(e==="TOKEN_REFRESHED"||e==="SIGNED_IN")&&this.changedAccessToken!==t?(this.realtime.setAuth(t),r=="STORAGE"&&this.auth.setAuth(t),this.changedAccessToken=t):(e==="SIGNED_OUT"||e==="USER_DELETED")&&(this.realtime.setAuth(this.supabaseKey),r=="STORAGE"&&this.auth.signOut())}}const On=(n,e,t)=>new Sn(n,e,t),Ie=On("https://uztvwcfzgcridiapmpob.supabase.co","eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6InV6dHZ3Y2Z6Z2NyaWRpYXBtcG9iIiwicm9sZSI6ImFub24iLCJpYXQiOjE2ODYwODE4MzksImV4cCI6MjAwMTY1NzgzOX0.-d8qHxbySjOBcbLI_wEKThnNVoNMQE2AWz-txbAC0zc");async function Rn(){const{data:n,error:e}=await Ie.from("todos").select("*");return e?(console.error(e),[]):n}async function jn(n){const{data:e,error:t}=await Ie.from("todos").insert([n]);return t?(console.error(t),null):e[0]}async function Cn(n){const{data:e,error:t}=await Ie.from("todos").update(n).match({id:n.id});return t?(console.error(t),null):e[0]}async function xn(n){const{error:e}=await Ie.from("todos").delete().match({id:n});return e?(console.error(e),!1):!0}function An(n){let e,t,r;function s(c,u){return c[4]==="completed"?Un:Pn}let i=s(n),o=i(n);return{c(){e=p("button"),o.c(),m(e,"class","btn delete svelte-1u3mmwl")},m(c,u){I(c,e,u),o.m(e,null),t||(r=Re(e,"click",n[6]),t=!0)},p(c,u){i!==(i=s(c))&&(o.d(1),o=i(c),o&&(o.c(),o.m(e,null)))},d(c){c&&C(e),o.d(),t=!1,r()}}}function In(n){let e,t,r;return{c(){e=p("button"),e.innerHTML="<span>✓</span>",m(e,"class","btn check svelte-1u3mmwl")},m(s,i){I(s,e,i),t||(r=Re(e,"click",n[5]),t=!0)},p:N,d(s){s&&C(e),t=!1,r()}}}function Pn(n){let e;return{c(){e=D("X")},m(t,r){I(t,e,r)},d(t){t&&C(e)}}}function Un(n){let e;return{c(){e=p("del"),e.textContent="X"},m(t,r){I(t,e,r)},d(t){t&&C(e)}}}function Nn(n){let e;function t(i,o){return i[0]==="check"&&typeof i[2]=="function"?In:An}let r=t(n),s=r(n);return{c(){s.c(),e=At()},m(i,o){s.m(i,o),I(i,e,o)},p(i,[o]){r===(r=t(i))&&s?s.p(i,o):(s.d(1),s=r(i),s&&(s.c(),s.m(e.parentNode,e)))},i:N,o:N,d(i){s.d(i),i&&C(e)}}}function Dn(n,e,t){let{type:r}=e,{index:s}=e,{toggleComplete:i}=e,{removeTodo:o}=e,{status:c}=e;const u=()=>i(s),l=()=>o(s);return n.$$set=a=>{"type"in a&&t(0,r=a.type),"index"in a&&t(1,s=a.index),"toggleComplete"in a&&t(2,i=a.toggleComplete),"removeTodo"in a&&t(3,o=a.removeTodo),"status"in a&&t(4,c=a.status)},[r,s,i,o,c,u,l]}class Ot extends oe{constructor(e){super(),ie(this,e,Dn,Nn,se,{type:0,index:1,toggleComplete:2,removeTodo:3,status:4})}}const Oe="completed",ut="pending",Ln="Add a new todo...",Mn="At TaskMaster, we are dedicated to helping you stay organized, focused, and achieve your goals. We provide a user-friendly platform to manage your tasks effectively, prioritize your work, and make progress towards your objectives. Let us be your companion on your journey to success.",Bn="© 2023 Alan Senderovich. All rights reserved.",Fn="Our Mission";function Gn(n){let e;return{c(){e=D(n[1])},m(t,r){I(t,e,r)},p(t,r){r&2&&fe(e,t[1])},d(t){t&&C(e)}}}function Hn(n){let e,t,r;return{c(){e=p("p"),t=p("del"),r=D(n[1]),m(e,"class","todo-completed svelte-tlfapo")},m(s,i){I(s,e,i),d(e,t),d(t,r)},p(s,i){i&2&&fe(r,s[1])},d(s){s&&C(e)}}}function zn(n){let e;function t(i,o){return i[0]===Oe?Hn:Gn}let r=t(n),s=r(n);return{c(){e=p("div"),s.c()},m(i,o){I(i,e,o),s.m(e,null)},p(i,[o]){r===(r=t(i))&&s?s.p(i,o):(s.d(1),s=r(i),s&&(s.c(),s.m(e,null)))},i:N,o:N,d(i){i&&C(e),s.d()}}}function Jn(n,e,t){let{status:r}=e,{title:s}=e;return n.$$set=i=>{"status"in i&&t(0,r=i.status),"title"in i&&t(1,s=i.title)},[r,s]}class qn extends oe{constructor(e){super(),ie(this,e,Jn,zn,se,{status:0,title:1})}}function ht(n,e,t){const r=n.slice();return r[12]=e[t],r[14]=t,r}function dt(n){let e,t;return e=new Ot({props:{type:"check",status:n[12].status,index:n[14],toggleComplete:n[7],removeTodo:n[8]}}),{c(){K(e.$$.fragment)},m(r,s){H(e,r,s),t=!0},p(r,s){const i={};s&1&&(i.status=r[12].status),s&1&&(i.index=r[14]),e.$set(i)},i(r){t||(A(e.$$.fragment,r),t=!0)},o(r){L(e.$$.fragment,r),t=!1},d(r){z(e,r)}}}function ft(n,e){let t,r,s,i,o,c,u,l;r=new qn({props:{status:e[12].status,title:e[12].title}});let a=e[12].status===ut&&dt(e);return c=new Ot({props:{type:"remove",status:e[12].status,index:e[14],removeTodo:e[8],toggleComplete:e[7]}}),{key:n,first:null,c(){t=p("li"),K(r.$$.fragment),s=O(),i=p("div"),a&&a.c(),o=O(),K(c.$$.fragment),u=O(),m(t,"class","task-item svelte-ca78uh"),this.first=t},m(h,f){I(h,t,f),H(r,t,null),d(t,s),d(t,i),a&&a.m(i,null),d(i,o),H(c,i,null),d(t,u),l=!0},p(h,f){e=h;const v={};f&1&&(v.status=e[12].status),f&1&&(v.title=e[12].title),r.$set(v),e[12].status===ut?a?(a.p(e,f),f&1&&A(a,1)):(a=dt(e),a.c(),A(a,1),a.m(i,o)):a&&(vt(),L(a,1,1,()=>{a=null}),gt());const _={};f&1&&(_.status=e[12].status),f&1&&(_.index=e[14]),c.$set(_)},i(h){l||(A(r.$$.fragment,h),A(a),A(c.$$.fragment,h),l=!0)},o(h){L(r.$$.fragment,h),L(a),L(c.$$.fragment,h),l=!1},d(h){h&&C(t),z(r),a&&a.d(),z(c)}}}function Wn(n){let e,t,r,s,i,o,c,u,l,a=[],h=new Map,f,v,_,g,E=` Total Todos: ${n[1]}`,$,P,Y,V=` | Completed Todos:  ${n[2]}`,ae,ce,w,S,U,J,Ke,Ye,me,Ve,Pe,q,Ue,Xe,_e=n[0];const Qe=b=>b[12].id;for(let b=0;b<_e.length;b+=1){let k=ht(n,_e,b),X=Qe(k);h.set(X,a[b]=ft(X,k))}return{c(){e=p("div"),t=p("h2"),t.textContent="TaskMaster",r=O(),s=p("div"),i=p("input"),o=O(),c=p("button"),c.textContent="Add",u=O(),l=p("ul");for(let b=0;b<a.length;b+=1)a[b].c();f=O(),v=p("div"),_=p("p"),g=p("span"),$=D(E),P=O(),Y=p("span"),ae=D(V),ce=O(),w=p("p"),S=p("span"),U=D('"'),J=D(n[4]),Ke=D('"'),Ye=O(),me=p("span"),Ve=D("- "),Pe=D(n[5]),m(t,"class","task-title svelte-ca78uh"),m(i,"type","text"),m(i,"placeholder",Ln),m(i,"class","task-input svelte-ca78uh"),m(c,"class","add-button svelte-ca78uh"),m(s,"class","input-wrapper svelte-ca78uh"),m(l,"class","task-list svelte-ca78uh"),m(g,"class","task-quantity"),m(Y,"class","task-quantity"),m(v,"class","task-quantities svelte-ca78uh"),m(S,"class","quote svelte-ca78uh"),m(me,"class","quote-author"),m(e,"class","task-container svelte-ca78uh")},m(b,k){I(b,e,k),d(e,t),d(e,r),d(e,s),d(s,i),tt(i,n[3]),d(s,o),d(s,c),d(e,u),d(e,l);for(let X=0;X<a.length;X+=1)a[X]&&a[X].m(l,null);d(e,f),d(e,v),d(v,_),d(_,g),d(g,$),d(_,P),d(_,Y),d(Y,ae),d(e,ce),d(e,w),d(w,S),d(S,U),d(S,J),d(S,Ke),d(w,Ye),d(w,me),d(me,Ve),d(me,Pe),q=!0,Ue||(Xe=[Re(i,"input",n[9]),Re(c,"click",n[6])],Ue=!0)},p(b,[k]){k&8&&i.value!==b[3]&&tt(i,b[3]),k&385&&(_e=b[0],vt(),a=Bt(a,k,Qe,1,b,_e,h,l,Mt,ft,null,ht),gt()),(!q||k&2)&&E!==(E=` Total Todos: ${b[1]}`)&&fe($,E),(!q||k&4)&&V!==(V=` | Completed Todos:  ${b[2]}`)&&fe(ae,V),(!q||k&16)&&fe(J,b[4]),(!q||k&32)&&fe(Pe,b[5])},i(b){if(!q){for(let k=0;k<_e.length;k+=1)A(a[k]);q=!0}},o(b){for(let k=0;k<a.length;k+=1)L(a[k]);q=!1},d(b){b&&C(e);for(let k=0;k<a.length;k+=1)a[k].d();Ue=!1,ne(Xe)}}}function Kn(n,e,t){let r=[],s,i=0,o="",c="",u="";async function l(){t(0,r=await Rn()),r.sort((g,E)=>{var $,P;return((($=g.id)==null?void 0:$.toString())??"").localeCompare(((P=E.id)==null?void 0:P.toString())??"")}),t(1,s=r.length),t(2,i=r.filter(g=>g.status===Oe).length)}async function a(){o.trim()!==""&&(await jn({title:o}),await l(),t(3,o=""))}async function h(g){const E=r[g];E.status=Oe,await Cn(E),t(0,r=[...r]),t(2,i=r.filter($=>$.status===Oe).length)}async function f(g){const{id:E}=r[g];await xn(E),await l()}async function v(){try{const g=await fetch("https://api.quotable.io/random");if(g.ok){const{content:E,author:$}=await g.json();t(4,c=E),t(5,u=$)}else t(4,c="Failed to fetch quote")}catch(g){t(4,c="Failed to fetch quote"),console.error("Error fetching quote:",g)}}rt(v),rt(l);function _(){o=this.value,t(3,o)}return[r,s,i,o,c,u,a,h,f,_]}class Yn extends oe{constructor(e){super(),ie(this,e,Kn,Wn,se,{})}}function Vn(n){let e,t=[{width:n[1]},{height:n[1]},{"stroke-width":"0"},{class:n[2]},n[0].a,n[4],{xmlns:"http://www.w3.org/2000/svg"}],r={};for(let s=0;s<t.length;s+=1)r=jt(r,t[s]);return{c(){e=xt("svg"),et(e,r)},m(s,i){I(s,e,i),e.innerHTML=n[3]},p(s,[i]){i&8&&(e.innerHTML=s[3]),et(e,r=Ft(t,[i&2&&{width:s[1]},i&2&&{height:s[1]},{"stroke-width":"0"},i&4&&{class:s[2]},i&1&&s[0].a,i&16&&s[4],{xmlns:"http://www.w3.org/2000/svg"}]))},i:N,o:N,d(s){s&&C(e)}}}function Xn(n,e,t){let{src:r}=e,{size:s="1em"}=e,{color:i=void 0}=e,{title:o=void 0}=e,{className:c=""}=e,u,l;return n.$$set=a=>{"src"in a&&t(0,r=a.src),"size"in a&&t(1,s=a.size),"color"in a&&t(5,i=a.color),"title"in a&&t(6,o=a.title),"className"in a&&t(2,c=a.className)},n.$$.update=()=>{n.$$.dirty&33&&(t(4,l={}),i&&(r.a.stroke!=="none"&&t(4,l.stroke=i,l),r.a.fill!=="none"&&t(4,l.fill=i,l))),n.$$.dirty&65&&t(3,u=(o?`<title>${o}</title>`:"")+r.c)},[r,s,c,u,l,i,o]}class Rt extends oe{constructor(e){super(),ie(this,e,Xn,Vn,se,{src:0,size:1,color:5,title:6,className:2})}}const Qn={a:{viewBox:"0 0 24 24",fill:"none"},c:'<path d="M15 19L8 12L15 5" stroke="#4A5568" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"></path>'};function Zn(n){let e,t,r,s,i,o,c,u,l,a;return l=new Rt({props:{src:Qn,size:"20"}}),{c(){e=p("div"),t=p("h2"),t.textContent="TaskMaster",r=O(),s=p("div"),i=p("button"),i.innerHTML='<img src="https://cdn2.iconfinder.com/data/icons/membership-account-outline/200/coder-512.png" width="20px" alt="user-icon"/>',o=O(),c=p("div"),u=p("button"),K(l.$$.fragment),m(t,"class","svelte-ce3kqf"),m(i,"class","svelte-ce3kqf"),m(u,"class","svelte-ce3kqf"),m(c,"class","btn-right svelte-ce3kqf"),m(s,"class","btn-group svelte-ce3kqf"),m(e,"class","navbar svelte-ce3kqf")},m(h,f){I(h,e,f),d(e,t),d(e,r),d(e,s),d(s,i),d(s,o),d(s,c),d(c,u),H(l,u,null),a=!0},p:N,i(h){a||(A(l.$$.fragment,h),a=!0)},o(h){L(l.$$.fragment,h),a=!1},d(h){h&&C(e),z(l)}}}class es extends oe{constructor(e){super(),ie(this,e,null,Zn,se,{})}}const ts={a:{fill:"currentColor",viewBox:"0 0 16 16"},c:'<path d="M8 0C3.58 0 0 3.58 0 8c0 3.54 2.29 6.53 5.47 7.59.4.07.55-.17.55-.38 0-.19-.01-.82-.01-1.49-2.01.37-2.53-.49-2.69-.94-.09-.23-.48-.94-.82-1.13-.28-.15-.68-.52-.01-.53.63-.01 1.08.58 1.23.82.72 1.21 1.87.87 2.33.66.07-.52.28-.87.51-1.07-1.78-.2-3.64-.89-3.64-3.95 0-.87.31-1.59.82-2.15-.08-.2-.36-1.02.08-2.12 0 0 .67-.21 2.2.82.64-.18 1.32-.27 2-.27.68 0 1.36.09 2 .27 1.53-1.04 2.2-.82 2.2-.82.44 1.1.16 1.92.08 2.12.51.56.82 1.27.82 2.15 0 3.07-1.87 3.75-3.65 3.95.29.25.54.73.54 1.48 0 1.07-.01 1.93-.01 2.2 0 .21.15.46.55.38A8.012 8.012 0 0 0 16 8c0-4.42-3.58-8-8-8z"></path>'};function rs(n){let e,t,r,s,i,o,c,u,l,a,h,f,v;return a=new Rt({props:{src:ts,size:"23"}}),{c(){e=p("div"),t=p("div"),r=p("div"),s=p("h3"),s.textContent=`${Fn}`,i=O(),o=p("p"),o.textContent=`${Mn}`,c=O(),u=p("div"),l=p("a"),K(a.$$.fragment),h=O(),f=p("span"),f.textContent=`${Bn}`,m(s,"class","svelte-zl5alm"),m(o,"class","svelte-zl5alm"),m(r,"class","footer-text"),m(l,"href","https://github.com/Alan-Senderovich"),m(l,"target","_blank"),m(l,"rel","noopener noreferrer"),m(l,"class","svelte-zl5alm"),m(u,"class","footer-github svelte-zl5alm"),m(t,"class","footer-main svelte-zl5alm"),m(f,"class","svelte-zl5alm"),m(e,"class","footer svelte-zl5alm")},m(_,g){I(_,e,g),d(e,t),d(t,r),d(r,s),d(r,i),d(r,o),d(t,c),d(t,u),d(u,l),H(a,l,null),d(e,h),d(e,f),v=!0},p:N,i(_){v||(A(a.$$.fragment,_),v=!0)},o(_){L(a.$$.fragment,_),v=!1},d(_){_&&C(e),z(a)}}}class ns extends oe{constructor(e){super(),ie(this,e,null,rs,se,{})}}function ss(n){let e,t,r,s,i,o,c,u,l;return r=new es({}),o=new Yn({}),u=new ns({}),{c(){e=p("main"),t=p("div"),K(r.$$.fragment),s=O(),i=p("div"),K(o.$$.fragment),c=O(),K(u.$$.fragment),m(i,"class","content svelte-12ngvjv"),m(t,"class","main-inside svelte-12ngvjv")},m(a,h){I(a,e,h),d(e,t),H(r,t,null),d(t,s),d(t,i),H(o,i,null),d(e,c),H(u,e,null),l=!0},p:N,i(a){l||(A(r.$$.fragment,a),A(o.$$.fragment,a),A(u.$$.fragment,a),l=!0)},o(a){L(r.$$.fragment,a),L(o.$$.fragment,a),L(u.$$.fragment,a),l=!1},d(a){a&&C(e),z(r),z(o),z(u)}}}class is extends oe{constructor(e){super(),ie(this,e,null,ss,se,{})}}new is({target:document.getElementById("app")});
